"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2999],{5732:(h,_,i)=>{i.d(_,{$:()=>u});var p=i(9863);let u=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275cmp=p.Xpm({type:a,selectors:[["app-wechat-open-page"]],decls:7,vars:0,consts:[[1,"weui-mask"],[1,"weui-dialog"],[1,"weui-dialog__bd"],[1,"weui-dialog__ft"],["href","weixin://","onclick","",1,"weui-dialog__btn","weui-dialog__btn_default"]],template:function(d,P){1&d&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2),p._uU(3,"\u8bf7\u5728\u624b\u673a\u7aef\u6253\u5f00\u9875\u9762"),p.qZA(),p.TgZ(4,"div",3)(5,"a",4),p._uU(6,"\u786e\u5b9a"),p.qZA()()()())},styles:[""]}),a})()},2999:(h,_,i)=>{i.r(_),i.d(_,{ShareActivityRewardsPageModule:()=>Y});var p=i(9808),u=i(3075),a=i(8962),g=i(1192),d=i(655),P=i(4157),M=i(7846),C=i(5098),t=i(9863),O=i(947),f=i(9993),y=i(5830),w=i(4828),m=i(9609),x=i(5161),S=i(5732),A=i(7873);const b=["appStatusContent"];function R(e,c){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",5,6),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t._UZ(3,"app-wechat-open-page"),t.qZA(),t.BQk()}}function T(e,c){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",5,6),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t.TgZ(3,"div",7),t._uU(4,"pad layout here"),t.qZA()(),t.BQk()}}function Z(e,c){1&e&&t._UZ(0,"ion-spinner",19)}function j(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",13)(1,"ion-row")(2,"ion-col",14)(3,"span"),t._uU(4),t.qZA()(),t.TgZ(5,"ion-col",14)(6,"span"),t._uU(7),t.qZA()()(),t.TgZ(8,"ion-row")(9,"ion-col",15)(10,"span"),t._uU(11),t.qZA()()(),t.TgZ(12,"ion-row")(13,"ion-col",14)(14,"span",16),t._uU(15),t.qZA()(),t.TgZ(16,"ion-col",14)(17,"ion-button",17),t.NdJ("click",function(){const r=t.CHM(n).$implicit;return t.oxw(2).onClickReceive(r)}),t.YNc(18,Z,1,0,"ion-spinner",18),t._uU(19),t.qZA()()()()}if(2&e){const n=c.$implicit;t.xp6(4),t.Oqu(n.activityName),t.xp6(3),t.Oqu(n.typeName),t.xp6(4),t.Oqu(n.description),t.xp6(4),t.Oqu(n.receiveTime),t.xp6(2),t.Q6J("disabled",n.disabled||n.loading),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.hij(" ",n.buttonText," ")}}function I(e,c){1&e&&(t.TgZ(0,"div",20)(1,"span"),t._uU(2,"\u6682\u65e0\u6570\u636e"),t.qZA()())}function F(e,c){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",5,6),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t.TgZ(3,"div",7)(4,"div",8)(5,"span"),t._uU(6,"\u6211\u7684\u5956\u52b1"),t.qZA()(),t.TgZ(7,"div",9)(8,"div",10),t.YNc(9,j,20,7,"div",11),t.qZA(),t.YNc(10,I,3,0,"div",12),t.qZA()()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(9),t.Q6J("ngForOf",n.rewardsList),t.xp6(1),t.Q6J("ngIf",0==n.rewardsList.length)}}const k=[{path:"",component:(()=>{class e extends M.n{constructor(n,o,s,r,v,l,D,J,Q,U){super(n,o,s,r),this.loadingCtrl=n,this.toastCtrl=o,this.runtime=s,this.screenFitService=r,this.navCtrl=v,this.modalCtrl=l,this.api=D,this.router=J,this.eventBus=Q,this.themeService=U,this.subscribeResult=null,this.rewardsList=[],this.pageIndex=1,this.pageSize=20,this.total=0,this.currentItem=null,this.hasMoreData=!1}ngOnInit(){this.subscribeResult=this.router.events.subscribe(n=>{n instanceof g.m2&&"/share-activity-rewards"==n.url&&this.setPageTitle("\u6d3b\u52a8\u5956\u52b1")})}ngOnDestroy(){this.subscribeResult&&(this.subscribeResult.unsubscribe(),this.subscribeResult=null)}reset(){this.rewardsList=[],this.pageIndex=1}initData(){return(0,d.mG)(this,void 0,void 0,function*(){this.reset(),yield Promise.all([this.fetchActivityRewardsList()]),this.appStatusContent.invokeSuccess()})}ionViewWillEnter(){this.setPageTitle("\u6d3b\u52a8\u5956\u52b1")}ionViewDidEnter(){(()=>(0,d.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(n=>{console.error("[init data errror]",n),this.appStatusContent.invokeError()})}onRetry(){(()=>(0,d.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(n=>{console.error("[init data errror]",n),this.appStatusContent.invokeError()})}onClickReceive(n){this.currentItem=n,(()=>(0,d.mG)(this,void 0,void 0,function*(){n.loading=!0,yield this.receiveRewards(),n.loading=!1,this.reset(),this.onRetry()}))().catch(o=>{console.error(o),this.showToast(`\u9886\u53d6\u5931\u8d25 [${o.message}]`),n.loading=!1})}setPageTitle(n){super.setPageTitle(n),this.eventBus.emmitEvent("changeNavTitle",n),this.eventBus.emmitEvent("changeDefaultHeader","standard"),this.eventBus.emmitEvent("changeShowRightBar","none")}loadData(n){this.pageIndex+=1,(()=>(0,d.mG)(this,void 0,void 0,function*(){yield this.fetchActivityRewardsList(),this.infiniteScroll&&this.infiniteScroll.complete()}))().catch(o=>{console.error(o),this.infiniteScroll&&this.infiniteScroll.complete()})}fetchActivityRewardsList(){return(0,d.mG)(this,void 0,void 0,function*(){const n=(0,P.d8)(C.y,yield this.api.fetchShareActivityRewardsList(this.pageIndex,this.pageSize));if(200!=n.code)return Promise.reject({code:n.code,message:n.msg});{const s=n.data.records;this.total=n.data.total,s&&s.length>0&&(s.forEach(r=>{let v=!1,l="\u7ee7\u7eed\u5206\u4eab";(0==r.activityStatus||1==r.status)&&(v=!0),0==r.activityStatus?l="\u6682\u672a\u5f00\u653e":1==r.activityStatus&&(0==r.status?l="\u9886\u53d6":1==r.status&&(l="\u5df2\u9886\u53d6")),this.rewardsList.push({uid:r.id+"",activityName:r.activityName,typeName:r.rewardValue,description:r.rewardDes,receiveTime:r.receiveTime,loading:!1,disabled:v,buttonText:l})}),this.hasMoreData=this.total>this.rewardsList.length)}})}receiveRewards(){return(0,d.mG)(this,void 0,void 0,function*(){const n=(0,P.d8)(C.y,yield this.api.receiveActivityReward(this.currentItem.uid));if(200!=n.code)return Promise.reject({code:n.code,message:n.msg});this.showToast("\u9886\u53d6\u6210\u529f")})}back(){this.navCtrl.back()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.HT),t.Y36(a.yF),t.Y36(O.t),t.Y36(f.v),t.Y36(a.SH),t.Y36(a.IN),t.Y36(y.s),t.Y36(g.F0),t.Y36(w.Y),t.Y36(m.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-share-activity-rewards"]],viewQuery:function(n,o){if(1&n&&(t.Gf(b,5),t.Gf(a.ju,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.appStatusContent=s.first),t.iGM(s=t.CRH())&&(o.infiniteScroll=s.first)}},features:[t.qOj],decls:8,vars:10,consts:[["id","pageContent",3,"fullscreen","scrollEvents"],[1,"page-root","share-activity-rewards"],[4,"ngIf"],["threshold","60px","position","bottom",3,"disabled","ionInfinite"],["loadingSpinner","dots","loadingText","\u6b63\u5728\u52a0\u8f7d"],[3,"retry"],["appStatusContent",""],[1,"app-container"],[1,"title"],[1,"list-wrapper"],[1,"data-wrapper"],["class","data-item",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"data-item"],["size","6"],["size","12"],[1,"secondary"],["size","small","color","secondary","expand","block",3,"disabled","click"],["name","dots",4,"ngIf"],["name","dots"],[1,"no-data"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-content",0)(1,"div",1),t.YNc(2,R,4,0,"ng-container",2),t.YNc(3,T,5,0,"ng-container",2),t.YNc(4,F,11,2,"ng-container",2),t.qZA(),t.TgZ(5,"ion-infinite-scroll",3),t.NdJ("ionInfinite",function(r){return o.loadData(r)}),t._UZ(6,"ion-infinite-scroll-content",4),t.qZA(),t._UZ(7,"app-common-footer"),t.qZA()),2&n&&(t.Tol(o.screenFitService.screenCategory),t.Q6J("fullscreen",o.themeService.immersive)("scrollEvents",!0),t.xp6(1),t.Tol(o.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","desktop"==o.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","pad"==o.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","phone"==o.screenFitService.screenCategory),t.xp6(1),t.Q6J("disabled",!o.hasMoreData))},directives:[a.W2,p.O5,x.D,S.$,p.sg,a.Nd,a.wI,a.YG,a.PQ,a.ju,a.MB,A.X],styles:[".flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.justify-start[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.justify-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.justify-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.justify-evenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.justify-around[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.justify-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align-start[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.align-center[_ngcontent-%COMP%]{display:flex;align-items:center}.align-end[_ngcontent-%COMP%]{display:flex;align-items:flex-end}div.page-root.share-activity-rewards[_ngcontent-%COMP%]{background:url(/assets/images/app/share_activity_rules_bg.png) repeat;background-size:100% auto;background-position:center top;background-color:#050404}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{width:700px;padding-top:90px}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:32px;color:#eed1b3}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%]{width:100%}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%]{width:100%;margin-top:10px}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%]{width:100%;min-height:46px;border:1px solid rgba(255,255,255,.4)}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%]:not(:last-of-type){border-bottom:none}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%]:nth-of-type(2n + 1){background:linear-gradient(90deg,rgba(238,209,179,.2) 0%,rgba(238,209,179,0) 100%)}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0 10px;color:#fff}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]:not(:last-of-type){border-right:1px solid rgba(255,255,255,.4)}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:100px}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > ion-grid[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%]:nth-of-type(1) > ion-col[_ngcontent-%COMP%]{color:#fff9}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.no-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:200px;border:1px solid rgba(255,255,255,.4);border-top:none}div.page-root.share-activity-rewards.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.no-data[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#fff}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{padding-top:90px}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:32px;color:#eed1b3}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%]{width:100%;margin-top:30px}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%]{width:100%}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;border-top:1px solid rgba(255,255,255,.4)}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid rgba(255,255,255,.4)}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%]:not(:first-of-type){margin-top:10px}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]:nth-of-type(2){display:flex;align-items:center;justify-content:flex-end}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;color:#fff}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > span.secondary[_ngcontent-%COMP%]{color:#fff6}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.data-wrapper[_ngcontent-%COMP%] > div.data-item[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:80px}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.no-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:200px;border:1px solid rgba(255,255,255,.4);border-top:none}div.page-root.share-activity-rewards.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]   div.list-wrapper[_ngcontent-%COMP%] > div.no-data[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#fff}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(k)],g.Bz]}),e})();var B=i(9277),N=i(9721);let Y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.ez,u.u5,a.Pc,B.G,N.x,E]]}),e})()}}]);