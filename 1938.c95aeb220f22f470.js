"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1938],{5732:(_,f,i)=>{i.d(f,{$:()=>g});var c=i(9863);let g=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=c.Xpm({type:a,selectors:[["app-wechat-open-page"]],decls:7,vars:0,consts:[[1,"weui-mask"],[1,"weui-dialog"],[1,"weui-dialog__bd"],[1,"weui-dialog__ft"],["href","weixin://","onclick","",1,"weui-dialog__btn","weui-dialog__btn_default"]],template:function(r,C){1&r&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._uU(3,"\u8bf7\u5728\u624b\u673a\u7aef\u6253\u5f00\u9875\u9762"),c.qZA(),c.TgZ(4,"div",3)(5,"a",4),c._uU(6,"\u786e\u5b9a"),c.qZA()()()())},styles:[""]}),a})()},1938:(_,f,i)=>{i.r(f),i.d(f,{VerifySmsCodePageModule:()=>I});var c=i(9808),g=i(3075),a=i(8962),p=i(1192),r=i(655),C=i(7846),l=i(2752),h=i(5098),m=i(4157),t=i(9863),y=i(947),M=i(9993),O=i(4828),x=i(5830),w=i(9609),k=i(5161),b=i(5732),S=i(7873);const T=["appStatusContent"];function V(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",3,4),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t._UZ(3,"app-wechat-open-page"),t.qZA(),t.BQk()}}function E(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",3,4),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t.TgZ(3,"div",5),t._uU(4,"pad layout here"),t.qZA()(),t.BQk()}}function A(o,d){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",3,4),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t.TgZ(3,"div",5),t._UZ(4,"div",6)(5,"div",7),t.TgZ(6,"div",8)(7,"div",9)(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"ion-item",10)(11,"ion-input",11),t.NdJ("keypress",function(s){return t.CHM(n),t.oxw().numberOnly(s)})("ngModelChange",function(s){return t.CHM(n),t.oxw().formData.verifyCode=s}),t.qZA(),t.TgZ(12,"ion-button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().onClickGetVerifyCode()}),t._uU(13),t.qZA()(),t.TgZ(14,"ion-button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().onClickNextStep()}),t._uU(15," \u4e0b\u4e00\u6b65 "),t.qZA()()()(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(9),t.hij("\u901a\u8fc7\u60a8\u7684\u624b\u673a\u53f7",n.ellipsisPhoneNO(n.runtime.user.mobile),"\uff0c\u4ee5\u786e\u8ba4\u4f60\u7684\u8eab\u4efd"),t.xp6(2),t.Q6J("ngModel",n.formData.verifyCode)("inputmode","numeric"),t.xp6(1),t.Q6J("disabled",n.disabled),t.xp6(1),t.hij(" ",n.getCodeText," ")}}const D=function(o){return{immersive:o}},F=[{path:"",component:(()=>{class o extends C.n{constructor(n,e,s,u,N,K,J,Y,v,z,G){super(n,e,s,u),this.loadingCtrl=n,this.toastCtrl=e,this.runtime=s,this.screenFitService=u,this.navCtrl=N,this.eventBus=K,this.modalCtrl=J,this.api=Y,this.routeInfo=v,this.router=z,this.themeService=G,this.from="",this.to="",this.formData={verifyCode:""},this.loading=!1,this.timeCountdown=60,this.getCodeText="\u53d1\u9001\u9a8c\u8bc1\u7801",this.smsKey="",this.disabled=!1,this.sending=!1,this.timerToken=null,this.isPayPassword=!1,this.isAuthIdcard=!1,v.queryParams.subscribe(P=>{this.from=P.from,this.to=P.to})}ngOnInit(){this.router.events.subscribe(n=>{n instanceof p.m2&&"/verify-sms-code"===n.url&&this.setPageTitle("\u9a8c\u8bc1\u624b\u673a\u53f7")})}setPageTitle(n){super.setPageTitle(n),this.eventBus.emmitEvent("changeNavTitle",n),this.eventBus.emmitEvent("changeDefaultHeader","standard"),this.eventBus.emmitEvent("changeShowRightBar","none")}initData(){return(0,r.mG)(this,void 0,void 0,function*(){this.appStatusContent.invokeSuccess(),console.log(JSON.stringify(this.runtime.user.mobile)),this.loadTimeCount()})}ionViewWillEnter(){this.setPageTitle("\u9a8c\u8bc1\u624b\u673a\u53f7")}ionViewDidLeave(){this.stopTimer()}ionViewDidEnter(){(()=>(0,r.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(n=>{console.error("[init data errror]",n),this.appStatusContent.invokeError()})}onClickGetVerifyCode(){switch(this.isPayPassword=!1,this.isAuthIdcard=!1,this.from){case"auth-idcard":this.smsKey=this.runtime.authIdcardCodeKey,this.isAuthIdcard=!0;break;case"edit-password":this.smsKey=this.runtime.payPasswordCodeKey,this.isPayPassword=!0;break;case"bind-bank-card":this.smsKey=this.runtime.bindBankCodeKey,this.isPayPassword=!1}(()=>(0,r.mG)(this,void 0,void 0,function*(){this.disabled=!0,yield this.getSmsCode()}))().catch(n=>{this.disabled=!1,this.sending=!1,console.error(n),this.showToast(`\u53d1\u9001\u9a8c\u8bc1\u7801\u5931\u8d25[${n.message}]`,!0)})}goNextAuthIdcard(){this.router.navigate(["/auth-idcard"],{queryParams:{verificationCode:this.formData.verifyCode,to:this.to}})}onClickNextStep(){if(l.E.isEmpty(this.formData.verifyCode))this.showToast("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff01");else if(this.formData.verifyCode.length<6)this.showToast("\u8bf7\u8f93\u51656\u4f4d\u6570\u5b57\u9a8c\u8bc1\u7801\uff01");else switch(this.from){case"auth-idcard":this.checkSmsCode();break;case"edit-password":this.router.navigate(["/set-password"],{queryParams:{verificationCode:this.formData.verifyCode,to:this.to}});break;case"bind-bank-card":this.router.navigate(["/bind-bank-card"],{queryParams:{verificationCode:this.formData.verifyCode,to:this.to}})}}onRetry(){(()=>(0,r.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(n=>{console.error("[init data errror]",n),this.appStatusContent.invokeError()})}back(){this.navCtrl.back()}ellipsisPhoneNO(n){return l.E.ellipsisPhoneNO(n)}loadTimeCount(){switch(this.isPayPassword=!1,this.isAuthIdcard=!1,this.from){case"auth-idcard":this.smsKey=this.runtime.authIdcardCodeKey,this.isAuthIdcard=!0;break;case"edit-password":this.smsKey=this.runtime.payPasswordCodeKey,this.isPayPassword=!0;break;case"bind-bank-card":this.smsKey=this.runtime.bindBankCodeKey,this.isPayPassword=!1}const n=l.E.getNowDateString();console.log("nowDateStr -> "+n),this.timeCountdown=60,this.runtime.getValue(this.smsKey).then(e=>{if(console.log("codeDateStr -> "+e),!l.E.isEmpty(e)){const s=l.E.getDateDiffValue(e,n);console.log("\u65f6\u95f4\u76f8\u5dee"+s+"\u79d2"),s>0&&s<=60&&(this.disabled=!0,this.timeCountdown=60-s,this.startTimer())}}).catch(()=>{})}startTimer(){this.stopTimer(),this.timerToken=setInterval(()=>{this.timeCountdown--,this.timeCountdown>0?this.getCodeText="\u5df2\u53d1\u9001("+this.timeCountdown+"\u79d2)":this.stopTimer()},1e3)}stopTimer(){this.timerToken&&(clearInterval(this.timerToken),this.timerToken=null,this.disabled=!1,this.getCodeText="\u83b7\u53d6\u9a8c\u8bc1\u7801")}getSmsCode(){return(0,r.mG)(this,void 0,void 0,function*(){const n=(0,m.d8)(h.y,yield this.api.getSendSmsVerify(this.isPayPassword,{mobile:this.runtime.user.mobile},this.isAuthIdcard));if(200!==n.code)return this.sending=!1,this.showToast("\u53d1\u9001\u5931\u8d25\uff01"+n.msg,!0),Promise.reject({code:n.code,message:n.msg});{this.showToast("\u53d1\u9001\u6210\u529f");const e=l.E.getNowDateString();console.log("nowDateStr -> "+e),this.runtime.setKeyValue(this.smsKey,e),this.sending=!0,this.timeCountdown=60,this.startTimer()}})}checkSmsCode(){return(0,r.mG)(this,void 0,void 0,function*(){const n=(0,m.d8)(h.y,yield this.api.checkSendSmsVerify(this.isPayPassword,{verificationCode:this.formData.verifyCode},this.isAuthIdcard));if(200!==n.code)return this.showToast(""+n.msg,!0),Promise.reject({code:n.code,message:n.msg});this.goNextAuthIdcard()})}numberOnly(n){const e=n.which?n.which:n.keyCode;return!(e>31&&(e<48||e>57))}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(a.HT),t.Y36(a.yF),t.Y36(y.t),t.Y36(M.v),t.Y36(a.SH),t.Y36(O.Y),t.Y36(a.IN),t.Y36(x.s),t.Y36(p.gz),t.Y36(p.F0),t.Y36(w.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-verify-sms-code"]],viewQuery:function(n,e){if(1&n&&t.Gf(T,5),2&n){let s;t.iGM(s=t.CRH())&&(e.appStatusContent=s.first)}},features:[t.qOj],decls:6,vars:12,consts:[["id","pageContent",3,"fullscreen","scrollEvents"],[1,"page-root","verify-sms-code",3,"ngClass"],[4,"ngIf"],[3,"retry"],["appStatusContent",""],[1,"app-container"],[1,"header"],[1,"title"],[1,"form-content"],[1,"tips"],["lines","none",1,"ion-no-padding"],["type","text","maxlength","6","placeholder","\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",3,"ngModel","inputmode","keypress","ngModelChange"],["expand","block","fill","clear",3,"disabled","click"],["expand","block","fill","solid",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content",0)(1,"div",1),t.YNc(2,V,4,0,"ng-container",2),t.YNc(3,E,5,0,"ng-container",2),t.YNc(4,A,16,5,"ng-container",2),t.qZA(),t._UZ(5,"app-common-footer"),t.qZA()),2&n&&(t.Tol(e.screenFitService.screenCategory),t.Q6J("fullscreen",e.themeService.immersive)("scrollEvents",!0),t.xp6(1),t.Tol(e.screenFitService.screenCategory),t.Q6J("ngClass",t.VKq(10,D,e.themeService.immersive)),t.xp6(1),t.Q6J("ngIf","desktop"==e.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","pad"==e.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","phone"==e.screenFitService.screenCategory))},directives:[a.W2,c.mk,c.O5,k.D,b.$,a.Ie,a.pK,a.j9,g.nD,g.JJ,g.On,a.YG,S.X],styles:[".flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.justify-start[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.justify-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.justify-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.justify-evenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.justify-around[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.justify-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align-start[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.align-center[_ngcontent-%COMP%]{display:flex;align-items:center}.align-end[_ngcontent-%COMP%]{display:flex;align-items:flex-end}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%]{display:flex;align-items:center;width:700px;margin:0 auto}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > ion-icon[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:16px}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-weight:700;margin-left:10px}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{margin-top:30px}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:450px;margin-top:20px;padding:20px 30px;background-color:#fff;overflow:hidden}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]{width:100%}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;color:#aaa}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{width:100%;margin-top:30px;--height: 48px;--border-color: #aaaaaa !important;--padding-start: 0px !important;--padding-end: 0px !important;--background: #eeeeee}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{width:auto;font-size:16px}div.page-root.verify-sms-code.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:40px;--ion-color-primary: #3D464F;--color: #ffffff;font-size:14px;font-weight:600}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;overflow:hidden}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin:0 auto}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > ion-icon[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:16px}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-weight:700;margin-left:10px}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{margin-top:30px}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;margin-top:10px;background-color:transparent}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]{width:100%}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;color:#aaa}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{width:100%;margin-top:10px;--height: 48px;--border-color: #aaaaaa !important;--padding-start: 10px !important;--padding-end: 0px !important;--background: #eeeeee}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{width:auto;font-size:16px}div.page-root.verify-sms-code.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:90px;--ion-color-primary: #3D464F;--color: #ffffff;font-size:14px;font-weight:600}"]}),o})()}];let B=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.Bz.forChild(F)],p.Bz]}),o})();var Z=i(9277),j=i(9721);let I=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[c.ez,g.u5,a.Pc,Z.G,j.x,B]]}),o})()}}]);