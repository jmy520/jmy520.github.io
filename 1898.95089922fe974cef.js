"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1898],{5732:(O,_,i)=>{i.d(_,{$:()=>u});var s=i(9863);let u=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-wechat-open-page"]],decls:7,vars:0,consts:[[1,"weui-mask"],[1,"weui-dialog"],[1,"weui-dialog__bd"],[1,"weui-dialog__ft"],["href","weixin://","onclick","",1,"weui-dialog__btn","weui-dialog__btn_default"]],template:function(p,v){1&p&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2),s._uU(3,"\u8bf7\u5728\u624b\u673a\u7aef\u6253\u5f00\u9875\u9762"),s.qZA(),s.TgZ(4,"div",3)(5,"a",4),s._uU(6,"\u786e\u5b9a"),s.qZA()()()())},styles:[""]}),r})()},1898:(O,_,i)=>{i.r(_),i.d(_,{WithdrawPageModule:()=>H});var s=i(9808),u=i(3075),r=i(8962),g=i(1192),p=i(655),v=i(7846),l=i(2752),w=i(5098),y=i(4157),t=i(9863),x=i(947),k=i(9993),b=i(4828),T=i(5830),F=i(9609),E=i(5161),D=i(5732),B=i(7873);const W=["appStatusContent"];function A(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",3,4),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t._UZ(3,"app-wechat-open-page"),t.qZA(),t.BQk()}}function Z(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",3,4),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t.TgZ(3,"div",5),t._uU(4,"pad layout here"),t.qZA()(),t.BQk()}}function N(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",14)(1,"span"),t._uU(2,"\u60a8\u8fd8\u672a\u7ed1\u5b9a\u94f6\u884c\u5361\uff0c"),t.TgZ(3,"ion-text",18),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).onClickBindBankCard()}),t._uU(4,"\u7acb\u5373\u7ed1\u5b9a"),t.qZA()()()}}function S(o,c){if(1&o&&(t.TgZ(0,"div",14)(1,"span"),t._uU(2),t.qZA()()),2&o){const n=t.oxw(2);t.xp6(2),t.AsE("\u53ef\u63d0\u73b0\u91d1\u989d\uff1a\uffe5",n.runtime.user.money,"\uff0c\u94f6\u884c\u5361\u8d26\u53f7\u4e3a ",n.getBankCard()," \uff0c\u63d0\u73b0\u91d1\u989d\u81f3\u5c1110\u5143\u4ee5\u4e0a")}}function I(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-status-content",3,4),t.NdJ("retry",function(){return t.CHM(n),t.oxw().onRetry()}),t.TgZ(3,"div",5),t._UZ(4,"div",6)(5,"div",7),t.TgZ(6,"div",8)(7,"ion-item",9)(8,"ion-input",10),t.NdJ("ngModelChange",function(a){return t.CHM(n),t.oxw().formData.amount=a}),t.qZA(),t.TgZ(9,"ion-button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().onClickFillAllAmount()}),t._uU(10," \u5168\u90e8 "),t.qZA()(),t.YNc(11,N,5,0,"div",12),t.YNc(12,S,3,2,"div",12),t.TgZ(13,"ion-item",9)(14,"ion-input",13),t.NdJ("keypress",function(a){return t.CHM(n),t.oxw().numberOnly(a)})("ngModelChange",function(a){return t.CHM(n),t.oxw().formData.password=a}),t.qZA()(),t.TgZ(15,"div",14)(16,"span",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().onClickForgetWithdrawPassword()}),t.TgZ(17,"ion-text",16),t._uU(18,"\u5fd8\u8bb0\u652f\u4ed8\u5bc6\u7801\uff1f"),t.qZA()()(),t.TgZ(19,"ion-button",17),t.NdJ("click",function(){return t.CHM(n),t.oxw().onClickConfirm()}),t._uU(20," \u786e\u5b9a "),t.qZA()()()(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(8),t.Q6J("ngModel",n.formData.amount),t.xp6(3),t.Q6J("ngIf",0==n.bindStatus),t.xp6(1),t.Q6J("ngIf",1==n.bindStatus),t.xp6(2),t.Q6J("ngModel",n.formData.password),t.xp6(5),t.Q6J("disabled",n.loading)}}const J=function(o){return{immersive:o}},U=[{path:"",component:(()=>{class o extends v.n{constructor(n,e,a,d,h,C,P,m,f,M,z){super(n,e,a,d),this.loadingCtrl=n,this.toastCtrl=e,this.runtime=a,this.screenFitService=d,this.navCtrl=h,this.eventBus=C,this.modalCtrl=P,this.api=m,this.router=f,this.routeInfo=M,this.themeService=z,this.loading=!1,this.bindStatus=0,this.to="",this.formData={amount:"",password:"",payType:1},M.queryParams.subscribe(R=>{this.to=R.to})}ngOnInit(){this.router.events.subscribe(n=>{n instanceof g.m2&&"/withdraw"===n.url&&this.setPageTitle("\u63d0\u73b0")})}setPageTitle(n){super.setPageTitle(n),this.eventBus.emmitEvent("changeNavTitle",n),this.eventBus.emmitEvent("changeDefaultHeader","standard"),this.eventBus.emmitEvent("changeShowRightBar","none")}initData(){return(0,p.mG)(this,void 0,void 0,function*(){yield Promise.all([this.fetchUserInfo()]),this.bindStatus=l.E.isEmpty(this.runtime.user.bank)||l.E.isEmpty(this.runtime.user.bankCardNo)?0:1,this.appStatusContent.invokeSuccess()})}ionViewWillEnter(){this.setPageTitle("\u63d0\u73b0"),this.initData()}ionViewDidEnter(){(()=>(0,p.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(n=>{console.error("[init data errror]",n),this.appStatusContent.invokeError()})}onRetry(){(()=>(0,p.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(n=>{console.error("[init data errror]",n),this.appStatusContent.invokeError()})}onClickFillAllAmount(){l.E.isEmpty(this.runtime.user.money)||(this.formData.amount=this.runtime.user.money)}onClickBindBankCard(){this.router.navigate(["/verify-sms-code"],{queryParams:{from:"bind-bank-card",to:"withdraw"}})}onClickForgetWithdrawPassword(){this.router.navigate(["/verify-sms-code"],{queryParams:{from:"edit-password",to:"withdraw"}})}onClickConfirm(){if(""===this.formData.amount)return void this.showToast("\u63d0\u73b0\u91d1\u989d\u4e0d\u80fd\u4e3a\u7a7a!");if(""===this.formData.password)return void this.showToast("\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801!");if(this.formData.password.length<6)return void this.showToast("\u8bf7\u8f93\u51656\u4f4d\u652f\u4ed8\u5bc6\u7801!");const n=parseFloat(this.formData.amount);0!==n?n<10?this.showToast("\u63d0\u73b0\u91d1\u989d\u4e0d\u80fd\u4e3a\u5c0f\u4e8e10!"):n>this.runtime.user.money?this.showToast("\u63d0\u73b0\u91d1\u989d\u4e0d\u80fd\u5927\u4e8e\u53ef\u7528\u4f59\u989d!"):this.doConfirm():this.showToast("\u63d0\u73b0\u91d1\u989d\u4e0d\u80fd\u4e3a0!")}doConfirm(){return(0,p.mG)(this,void 0,void 0,function*(){const n=yield this.api.userWithdrawal({money:this.formData.amount,payType:this.formData.payType,payPassword:this.formData.password});if(200===n.code){const e=n.data;return this.loading=!1,this.showToast("\u63d0\u73b0\u6210\u529f!"),this.navCtrl.navigateRoot(["/personal-center"],{queryParams:{menu:"center",index:0},replaceUrl:!0}),e}return this.showToast(`\u63d0\u73b0\u5931\u8d25[${n.msg}]`,!0),Promise.reject({code:n.code,message:n.message})})}back(){this.navCtrl.back()}getBankCard(){return this.runtime.user.bankCardNo}numberOnly(n){const e=n.which?n.which:n.keyCode;return!(e>31&&(e<48||e>57))}fetchUserInfo(){return(0,p.mG)(this,void 0,void 0,function*(){const n=(0,y.d8)(w.y,yield this.api.userDetail());if(200!==n.code)return Promise.reject({code:n.code,message:n.msg});{const e=n.data,a="assets/images/default_avatar.png",d="desktop"==this.screenFitService.screenCategory?"assets/images/default_personal_center_bg.png":"assets/images/default_personal_center_bg_phone.png",h=l.E.isEmpty(e.nickName)?"--":e.nickName,C=l.E.isEmpty(e.avatar)?a:e.avatar,P=l.E.isEmpty(e.bgUrl)?d:e.bgUrl,m="";this.runtime.cacheUser({uid:e.uid,nickName:h,avatar:C,bank:e.bank,bankCardNo:e.bankCardNo,bgUrl:P,identity:e.identity,introduction:e.introduction||m,phoneNumber:e.mobile,mobile:e.mobile,balance:e.money,money:e.money,openId:e.openId,xqOpenId:e.xqOpenId,wxNickName:e.wxNickName,payPassword:e.payPassword,realName:e.realName,status:e.status,badgeIcon:e.userBadgeUrl,userBadge:e.userBadge},!0)}})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(r.HT),t.Y36(r.yF),t.Y36(x.t),t.Y36(k.v),t.Y36(r.SH),t.Y36(b.Y),t.Y36(r.IN),t.Y36(T.s),t.Y36(g.F0),t.Y36(g.gz),t.Y36(F.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-withdraw"]],viewQuery:function(n,e){if(1&n&&t.Gf(W,5),2&n){let a;t.iGM(a=t.CRH())&&(e.appStatusContent=a.first)}},features:[t.qOj],decls:6,vars:12,consts:[["id","pageContent",3,"fullscreen","scrollEvents"],[1,"page-root","withdraw",3,"ngClass"],[4,"ngIf"],[3,"retry"],["appStatusContent",""],[1,"app-container"],[1,"header"],[1,"title"],[1,"form-content"],["lines","none",1,"ion-no-padding"],["type","number","placeholder","\u8bf7\u8f93\u5165\u63d0\u73b0\u91d1\u989d",3,"ngModel","ngModelChange"],["expand","block","fill","clear",3,"click"],["class","tips",4,"ngIf"],["type","password","maxlength","6","placeholder","\u8bf7\u8f93\u5165\u652f\u4ed8\u5bc6\u7801",3,"ngModel","keypress","ngModelChange"],[1,"tips"],[2,"cursor","pointer",3,"click"],["color","primary"],["expand","block","fill","solid",3,"disabled","click"],["color","primary",2,"cursor","pointer",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content",0)(1,"div",1),t.YNc(2,A,4,0,"ng-container",2),t.YNc(3,Z,5,0,"ng-container",2),t.YNc(4,I,21,5,"ng-container",2),t.qZA(),t._UZ(5,"app-common-footer"),t.qZA()),2&n&&(t.Tol(e.screenFitService.screenCategory),t.Q6J("fullscreen",e.themeService.immersive)("scrollEvents",!0),t.xp6(1),t.Tol(e.screenFitService.screenCategory),t.Q6J("ngClass",t.VKq(10,J,e.themeService.immersive)),t.xp6(1),t.Q6J("ngIf","desktop"==e.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","pad"==e.screenFitService.screenCategory),t.xp6(1),t.Q6J("ngIf","phone"==e.screenFitService.screenCategory))},directives:[r.W2,s.mk,s.O5,E.D,D.$,r.Ie,r.pK,r.as,u.JJ,u.On,r.YG,r.yW,r.j9,u.nD,B.X],styles:[".flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.justify-start[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.justify-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.justify-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.justify-evenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.justify-around[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.justify-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align-start[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.align-center[_ngcontent-%COMP%]{display:flex;align-items:center}.align-end[_ngcontent-%COMP%]{display:flex;align-items:flex-end}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%]{display:flex;align-items:center;width:700px;margin:0 auto}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > ion-icon[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:16px}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-weight:700;margin-left:10px}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{margin-top:30px}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:450px;margin-top:20px;padding:20px 30px;background-color:#fff;overflow:hidden}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{width:100%;--height: 48px;--border-color: #aaaaaa !important;--padding-start: 0px !important;--padding-end: 0px !important;--background: #eeeeee}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]:not(:first-of-type){margin-top:20px}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{width:100%;font-size:16px}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]{width:100%;margin-top:20px}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;color:#aaa}div.page-root.withdraw.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:40px;--ion-color-primary: #3D464F;--color: #ffffff;font-size:14px;font-weight:600}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin:0 auto}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > ion-icon[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:16px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-weight:700;margin-left:10px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{margin-top:30px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;margin-top:20px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{width:100%;--height: 48px;--border-color: #aaaaaa !important;--padding-start: 10px !important;--padding-end: 0px !important;--background: #eeeeee}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]:not(:first-of-type){margin-top:20px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{width:100%;font-size:16px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]{width:100%;margin-top:20px}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;color:#aaa}div.page-root.withdraw.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:140px;--ion-color-primary: #3D464F;--color: #ffffff;font-size:14px;font-weight:600}"]}),o})()}];let j=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),o})();var Y=i(9277),Q=i(9721);let H=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[s.ez,u.u5,r.Pc,Y.G,Q.x,j]]}),o})()}}]);