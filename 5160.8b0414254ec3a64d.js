"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5160],{5732:(f,l,a)=>{a.d(l,{$:()=>u});var r=a(9863);let u=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-wechat-open-page"]],decls:7,vars:0,consts:[[1,"weui-mask"],[1,"weui-dialog"],[1,"weui-dialog__bd"],[1,"weui-dialog__ft"],["href","weixin://","onclick","",1,"weui-dialog__btn","weui-dialog__btn_default"]],template:function(s,C){1&s&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2),r._uU(3,"\u8bf7\u5728\u624b\u673a\u7aef\u6253\u5f00\u9875\u9762"),r.qZA(),r.TgZ(4,"div",3)(5,"a",4),r._uU(6,"\u786e\u5b9a"),r.qZA()()()())},styles:[""]}),i})()},5160:(f,l,a)=>{a.r(l),a.d(l,{BindBankCardPageModule:()=>N});var r=a(9808),u=a(3075),i=a(8962),p=a(1192),s=a(655),C=a(7846),_=a(2752),n=a(9863),P=a(947),v=a(9993),M=a(4828),O=a(5830),h=a(9609),m=a(5161),b=a(5732),k=a(7873);const x=["appStatusContent"];function y(o,d){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"app-status-content",3,4),n.NdJ("retry",function(){return n.CHM(t),n.oxw().onRetry()}),n._UZ(3,"app-wechat-open-page"),n.qZA(),n.BQk()}}function B(o,d){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"app-status-content",3,4),n.NdJ("retry",function(){return n.CHM(t),n.oxw().onRetry()}),n.TgZ(3,"div",5),n._uU(4,"pad layout here"),n.qZA()(),n.BQk()}}const T=function(){return{header:"\u94f6\u884c\u5361\u7c7b\u578b"}};function w(o,d){if(1&o){const t=n.EpF();n.ynx(0),n.TgZ(1,"app-status-content",3,4),n.NdJ("retry",function(){return n.CHM(t),n.oxw().onRetry()}),n.TgZ(3,"div",5),n._UZ(4,"div",6)(5,"div",7),n.TgZ(6,"div",8)(7,"ion-item",9)(8,"span"),n._uU(9),n.qZA()(),n.TgZ(10,"ion-item",9)(11,"ion-select",10),n.NdJ("ngModelChange",function(c){return n.CHM(t),n.oxw().formData.bank=c}),n.TgZ(12,"ion-select-option",11),n._uU(13,"\u4e2d\u56fd\u94f6\u884c"),n.qZA(),n.TgZ(14,"ion-select-option",12),n._uU(15,"\u519c\u4e1a\u94f6\u884c"),n.qZA(),n.TgZ(16,"ion-select-option",13),n._uU(17,"\u5de5\u5546\u94f6\u884c"),n.qZA(),n.TgZ(18,"ion-select-option",14),n._uU(19,"\u5efa\u8bbe\u94f6\u884c"),n.qZA(),n.TgZ(20,"ion-select-option",15),n._uU(21,"\u90ae\u653f\u94f6\u884c"),n.qZA(),n.TgZ(22,"ion-select-option",16),n._uU(23,"\u6d66\u53d1\u94f6\u884c"),n.qZA()()(),n.TgZ(24,"ion-item",9)(25,"ion-input",17),n.NdJ("ngModelChange",function(c){return n.CHM(t),n.oxw().formData.bankCardNo=c})("keypress",function(c){return n.CHM(t),n.oxw().numberOnly(c)}),n.qZA()(),n.TgZ(26,"ion-button",18),n.NdJ("click",function(){return n.CHM(t),n.oxw().onClickConfirm()}),n._uU(27," \u63d0\u4ea4 "),n.qZA(),n.TgZ(28,"div",19),n._uU(29," \u8bf7\u7ed1\u5b9a\u4e0e\u8d26\u53f7\u5b9e\u540d\u4fe1\u606f\u4e00\u81f4\u7684\u94f6\u884c\u5361 "),n.qZA()()()(),n.BQk()}if(2&o){const t=n.oxw();n.xp6(9),n.Oqu(t.formData.realName),n.xp6(2),n.Q6J("ngModel",t.formData.bank)("interfaceOptions",n.DdM(5,T)),n.xp6(14),n.Q6J("ngModel",t.formData.bankCardNo),n.xp6(1),n.Q6J("disabled",t.loading)}}const F=function(o){return{immersive:o}},Z=[{path:"",component:(()=>{class o extends C.n{constructor(t,e,c,g,j,S,J,Y,U,z,R,I){super(t,e,c,g),this.loadingCtrl=t,this.toastCtrl=e,this.runtime=c,this.screenFitService=g,this.navCtrl=j,this.eventBus=S,this.modalCtrl=J,this.api=Y,this.routeInfo=U,this.router=z,this.themeService=R,this.location=I,this.loading=!1,this.formData={verificationCode:"",realName:"",identity:"",bankCardNo:"",bank:""},this.verificationCode="",this.to="",this.subscribeResult=null,this.subscribeRouteInfo=null}ngOnInit(){this.subscribeResult=this.router.events.subscribe(t=>{t instanceof p.m2&&"/bind-bank-card"===t.url&&this.setPageTitle("\u7ed1\u5b9a\u94f6\u884c\u5361")}),this.subscribeRouteInfo=this.routeInfo.queryParams.subscribe(t=>{this.verificationCode=t.verificationCode,this.to=t.to})}initData(){return(0,s.mG)(this,void 0,void 0,function*(){this.formData.verificationCode=this.verificationCode,this.formData.realName=this.runtime.user.realName,this.appStatusContent.invokeSuccess()})}setPageTitle(t){super.setPageTitle(t),this.eventBus.emmitEvent("changeNavTitle",t),this.eventBus.emmitEvent("changeDefaultHeader","standard"),this.eventBus.emmitEvent("changeShowRightBar","none")}ionViewWillEnter(){this.setPageTitle("\u7ed1\u5b9a\u94f6\u884c\u5361")}ionViewDidEnter(){(()=>(0,s.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(t=>{console.error("[init data errror]",t),this.appStatusContent.invokeError()})}numberOnly(t){const e=t.which?t.which:t.keyCode;return!(e>31&&(e<48||e>57))}idNumberOnly(t){const e=t.which?t.which:t.keyCode;return 88===e||!(e>31&&(e<48||e>57))}checkFormData(){return _.E.isEmpty(this.formData.bank)?(this.showToast("\u8bf7\u9009\u62e9\u94f6\u884c",!0),!1):!_.E.isEmpty(this.formData.bankCardNo)||(this.showToast("\u8bf7\u8f93\u5165\u94f6\u884c\u5361\u53f7",!0),!1)}onClickConfirm(){this.checkFormData()&&(this.loading=!0,(()=>(0,s.mG)(this,void 0,void 0,function*(){yield this.doConfirm()}))().catch(t=>{this.loading=!1,console.error(t)}))}doConfirm(){return(0,s.mG)(this,void 0,void 0,function*(){const t=yield this.api.userUpdateBankCard({verificationCode:this.formData.verificationCode,bankCardNo:this.formData.bankCardNo,bank:this.formData.bank});if(200===t.code){const e=t.data;return this.loading=!1,this.showToast("\u6210\u529f\u8bbe\u7f6e\u94f6\u884c\u5361\u4fe1\u606f!"),this.router.navigate(["/settings"],{queryParams:{menu:"settings",index:0}}),this.back(),e}return this.showToast(`\u8bbe\u7f6e\u94f6\u884c\u5361\u4fe1\u606f\u5931\u8d25[${t.msg}]`,!0),Promise.reject({code:t.code,message:t.message})})}onRetry(){(()=>(0,s.mG)(this,void 0,void 0,function*(){yield this.initData()}))().catch(t=>{console.error("[init data errror]",t),this.appStatusContent.invokeError()})}back(){"center"===this.to?this.navCtrl.navigateRoot(["/settings"],{queryParams:{menu:"settings",index:0}}):this.location.historyGo(-2)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(i.HT),n.Y36(i.yF),n.Y36(P.t),n.Y36(v.v),n.Y36(i.SH),n.Y36(M.Y),n.Y36(i.IN),n.Y36(O.s),n.Y36(p.gz),n.Y36(p.F0),n.Y36(h.f),n.Y36(r.Ye))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-bind-bank-card"]],viewQuery:function(t,e){if(1&t&&n.Gf(x,5),2&t){let c;n.iGM(c=n.CRH())&&(e.appStatusContent=c.first)}},features:[n.qOj],decls:6,vars:12,consts:[["id","pageContent",3,"fullscreen","scrollEvents"],[1,"page-root","bind-bank-card",3,"ngClass"],[4,"ngIf"],[3,"retry"],["appStatusContent",""],[1,"app-container"],[1,"header"],[1,"title"],[1,"form-content"],["lines","none",1,"ion-no-padding"],["interface","popover","cancelText","\u53d6\u6d88","okText","\u786e\u8ba4","multiple","false","placeholder","\u8bf7\u9009\u62e9\u94f6\u884c\u5361\u7c7b\u578b",3,"ngModel","interfaceOptions","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["type","text","placeholder","\u8bf7\u8f93\u5165\u94f6\u884c\u5361\u53f7",3,"ngModel","ngModelChange","keypress"],["expand","block","fill","solid",3,"disabled","click"],[1,"tips"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-content",0)(1,"div",1),n.YNc(2,y,4,0,"ng-container",2),n.YNc(3,B,5,0,"ng-container",2),n.YNc(4,w,30,6,"ng-container",2),n.qZA(),n._UZ(5,"app-common-footer"),n.qZA()),2&t&&(n.Tol(e.screenFitService.screenCategory),n.Q6J("fullscreen",e.themeService.immersive)("scrollEvents",!0),n.xp6(1),n.Tol(e.screenFitService.screenCategory),n.Q6J("ngClass",n.VKq(10,F,e.themeService.immersive)),n.xp6(1),n.Q6J("ngIf","desktop"==e.screenFitService.screenCategory),n.xp6(1),n.Q6J("ngIf","pad"==e.screenFitService.screenCategory),n.xp6(1),n.Q6J("ngIf","phone"==e.screenFitService.screenCategory))},directives:[i.W2,r.mk,r.O5,m.D,b.$,i.Ie,i.t9,i.QI,u.JJ,u.On,i.n0,i.pK,i.j9,i.YG,k.X],styles:[".flex-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.justify-start[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.justify-center[_ngcontent-%COMP%]{display:flex;justify-content:center}.justify-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.justify-evenly[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.justify-around[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.justify-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.align-start[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.align-center[_ngcontent-%COMP%]{display:flex;align-items:center}.align-end[_ngcontent-%COMP%]{display:flex;align-items:flex-end}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%]{display:flex;align-items:center;width:700px;margin:0 auto}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > ion-icon[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:16px}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-weight:700;margin-left:10px}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{margin-top:30px}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:450px;margin-top:20px;padding:20px 30px;background-color:#fff;overflow:hidden}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{width:100%;margin-top:30px;--height: 48px;--border-color: #aaaaaa !important;--padding-start: 0px !important;--padding-end: 0px !important;--background: #eeeeee}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{width:auto;font-size:16px}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:0 30px}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-select[_ngcontent-%COMP%]{padding:0 30px;background-color:transparent;--padding-start: 0px !important;font-size:16px}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:40px;--ion-color-primary: #3D464F;--color: #ffffff;font-size:14px;font-weight:600}div.page-root.bind-bank-card.desktop[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:20px;margin-bottom:30px;color:#ff4d4f;font-size:12px;font-weight:400;display:flex;align-items:center;justify-content:center}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin:0 auto}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > ion-icon[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{color:#e2aa6f}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{display:block;font-weight:700;font-size:16px}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.header[_ngcontent-%COMP%] > div.back[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-weight:700;margin-left:10px}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%]{margin-top:30px}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;margin-top:20px}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%]{width:100%;margin-top:20px;--height: 48px;--border-color: #aaaaaa !important;--padding-start: 10px !important;--padding-end: 10px !important;--background: #eeeeee}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-input[_ngcontent-%COMP%]{width:auto;font-size:16px}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:0}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-item[_ngcontent-%COMP%] > ion-select[_ngcontent-%COMP%]{background-color:transparent;--padding-start: 10px !important;font-size:16px;width:100%}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:80px;--ion-color-primary: #3D464F;--color: #ffffff;font-size:14px;font-weight:600}div.page-root.bind-bank-card.phone[_ngcontent-%COMP%]   app-status-content[_ngcontent-%COMP%]   div.app-container[_ngcontent-%COMP%] > div.form-content[_ngcontent-%COMP%] > div.tips[_ngcontent-%COMP%]{width:100%;height:44px;margin-top:20px;margin-bottom:30px;color:#ff4d4f;font-size:12px;font-weight:400;display:flex;align-items:center;justify-content:center}"]}),o})()}];let D=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[p.Bz.forChild(Z)],p.Bz]}),o})();var E=a(9277),A=a(9721);let N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[r.ez,u.u5,i.Pc,E.G,A.x,D]]}),o})()}}]);