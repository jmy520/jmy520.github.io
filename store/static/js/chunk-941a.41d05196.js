(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-941a"],{AvE9:function(e,t,a){"use strict";a.r(t);var s=a("KTTK"),n={name:"PayOrder",data:function(){var e=this;return{progressStarted:!1,swiperOption:{direction:"vertical",slidesPerView:1,allowTouchMove:!1,spaceBetween:30,on:{slideChange:function(){var t=e.$refs.swiperRef.swiper.activeIndex;switch(e.payMethodIndex=t,t){case 0:e.isSelectedUSDT=!0,e.isSelectedNetworkBank=!1;break;case 1:e.isSelectedUSDT=!1,e.isSelectedNetworkBank=!0;break;case 2:e.isSelectedUSDT=!1,e.isSelectedNetworkBank=!1}}}},orderData:{},express:{name:"express-name",amount_en:0,amount:0},cartGoodsList:[],paymentMethodList:[],usdt:{},bank:{},remark:"",isSelectedUSDT:!0,isSelectedNetworkBank:!1,isSelectedAlipay:!1,transferNumber:"",payMethodIndex:0,exchangeRate:1,confirmStatus:!1}},created:function(){this.fetchOrderData()},mounted:function(){var e=this;this.$nextTick(function(){setTimeout(function(){e.progressStarted=!0},300)})},methods:{fetchOrderData:function(){var e=this,t=this.getOrderId();s.p(t).then(function(t){if(1===t.Status){if(e.orderData=t.Result,e.cartGoodsList=e.orderData.goods,e.paymentMethodList=e.orderData.pays,e.remark=e.orderData.remake,e.paymentMethodList&&e.paymentMethodList.length>0){var a=null,s=null;e.paymentMethodList.forEach(function(e){"USDT"===e.unit?a=e:e.bank&&(s=e)}),a&&(e.usdt.paymentId=a.pm_id,e.usdt.transferAmount=a.total_money,e.usdt.qrcodePath=a.receipt_code,e.usdt.walletAddress=a.account,e.exchangeRate=a.cny),s&&(e.bank.paymentId=a.pm_id,e.bank.userName=s.name,e.bank.bankName=s.bank,e.bank.depositAccount=s.account,e.bank.transferAmount=s.total_money,e.remark=s.remake)}}else e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t),e.$parent.$parent.showCommonErrorDialog(function(){e.fetchOrderData()})})},postPayment:function(){var e=this;if(!this.isSelectedUSDT||this.transferNumber){var t=this.getOrderId(),a=this.isSelectedUSDT?this.usdt.paymentId:this.bank.paymentId;s.b(t,a,this.transferNumber).then(function(t){1===t.Status?e.$router.replace({name:"PaySuccess",params:{orderId:e.getOrderId(),method:e.isSelectedUSDT?"USDT":"BANK",amount:e.orderData.pay_money}}):e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t),e.$notify.error({title:e.$t("common.dialog_title"),message:t.message})})}else this.$notify.warning({title:this.$t("common.dialog_title"),message:this.$t("pay_order.transfer_number_none")})},getOrderId:function(){var e=this.$route.params.orderId;return e?localStorage.setItem("pay-order-key-order-id",e):e=localStorage.getItem("pay-order-key-order-id"),e},getTotalAmount:function(){return this.$t("common.currency_symbol")+this.orderData.pay_money},handlePayMethodChange:function(e){switch(this.payMethodIndex=e,e){case 0:this.isSelectedUSDT=!0,this.isSelectedNetworkBank=!1,this.$refs.swiperRef.swiper.slideTo(0,500);break;case 1:this.isSelectedUSDT=!1,this.isSelectedNetworkBank=!0,this.$refs.swiperRef.swiper.slideTo(1,500)}},onCopySuccess:function(){this.$notify.success({title:this.$t("common.dialog_title"),message:this.$t("pay_order.copy_success")})},onCopyError:function(){this.$notify.error({title:this.$t("common.dialog_title"),message:this.$t("pay_order.copy_error")})},handleSubmit:function(){this.postPayment()}}},r=(a("W0nf"),a("KHd+")),o=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pay-order-container"},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"status-indication-wrapper"},[a("span",[e._v("\n        "+e._s(e.$t("pay_order.status_01"))+"\n      ")]),e._v(" "),a("span",{class:e.progressStarted?"active":""},[e._v("\n        "+e._s(e.$t("pay_order.status_02"))+"\n      ")]),e._v(" "),a("span",[e._v("\n        "+e._s(e.$t("pay_order.status_03"))+"\n      ")])]),e._v(" "),a("h4",[e._v("\n      "+e._s(e.$t("pay_order.order_information"))+"\n    ")]),e._v(" "),a("el-table",{attrs:{data:e.cartGoodsList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:e.$t("pay_order.goods_information"),"class-name":"goods-info-column","label-class-name":"goods-info-column-label","min-width":"520"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{attrs:{src:t.row.logo,fit:"cover"}}),e._v(" "),a("span",[e._v("\n            "+e._s(t.row.name)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("pay_order.price"),"min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.$t("common.currency_symbol")+t.row.price)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("pay_order.count"),prop:"buy_cnt","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("pay_order.amount"),"class-name":"amount-column","label-class-name":"amount-column-label","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.$t("common.currency_symbol")+t.row.goods_total_money)+"\n        ")]}}])})],1),e._v(" "),a("div",{staticClass:"remark-and-amount"},[a("div",{staticClass:"remark"},[a("span",[e._v("\n          "+e._s(e.$t("pay_order.remark"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.remark)+"\n        ")])]),e._v(" "),a("div",{staticClass:"amount"},[a("span",[e._v("\n          "+e._s(e.$t("pay_order.total"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.getTotalAmount())+"\n        ")])])]),e._v(" "),a("h4",[e._v("\n      "+e._s(e.$t("pay_order.choose_pay_method"))+"\n    ")]),e._v(" "),a("div",{staticClass:"pay-method-wrapper"},[a("div",{staticClass:"menu-wrapper"},[a("ul",[a("li",{class:0===e.payMethodIndex?"active":"",on:{click:function(t){e.handlePayMethodChange(0)}}},[a("el-checkbox",{attrs:{label:e.$t("pay_order.usdt_pay")},model:{value:e.isSelectedUSDT,callback:function(t){e.isSelectedUSDT=t},expression:"isSelectedUSDT"}})],1),e._v(" "),a("li",{class:1===e.payMethodIndex?"active":"",on:{click:function(t){e.handlePayMethodChange(1)}}},[a("el-checkbox",{attrs:{label:e.$t("pay_order.network_bank")},model:{value:e.isSelectedNetworkBank,callback:function(t){e.isSelectedNetworkBank=t},expression:"isSelectedNetworkBank"}})],1),e._v(" "),a("li",[a("el-checkbox",{attrs:{disabled:!0,label:e.$t("pay_order.ali_pay")}})],1)])]),e._v(" "),a("div",{staticClass:"content-wrapper"},[a("swiper",{ref:"swiperRef",attrs:{options:e.swiperOption}},[a("swiper-slide",[a("div",{staticClass:"content-item usdt"},[a("el-image",{attrs:{src:e.usdt.qrcodePath,fit:"cover"}}),e._v(" "),a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"transfer-amount"},[a("span",[e._v("\n                    "+e._s(e.$t("pay_order.transfer_amount"))+"\n                  ")]),e._v(" "),a("span",[a("b",[e._v(e._s(e.usdt.transferAmount))]),e._v(" USDT\n                  ")]),e._v(" "),a("span",[e._v("\n                    "+e._s(e.$t("pay_order.real_time_exchange_rate",[1,e.exchangeRate]))+"\n                  ")])]),e._v(" "),a("div",{staticClass:"wallet-address-label"},[e._v("\n                  "+e._s(e.$t("pay_order.wallet_address"))+"\n                ")]),e._v(" "),a("div",{staticClass:"wallet-address"},[a("span",{ref:"walletAddress"},[e._v("\n                    "+e._s(e.usdt.walletAddress)+"\n                  ")]),e._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.usdt.walletAddress,expression:"usdt.walletAddress",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}],attrs:{type:"primary"}},[e._v("\n                    "+e._s(e.$t("pay_order.copy"))+"\n                  ")])],1),e._v(" "),a("el-input",{class:e.confirmStatus?"active":"",attrs:{placeholder:e.$t("pay_order.transfer_number_placehold")},model:{value:e.transferNumber,callback:function(t){e.transferNumber=t},expression:"transferNumber"}}),e._v(" "),a("ol",{staticClass:"transfer-tips"},[a("li",[e._v("\n                    "+e._s(e.$t("pay_order.tips_01"))+"\n                  ")]),e._v(" "),a("li",[e._v("\n                    "+e._s(e.$t("pay_order.tips_02"))+"\n                  ")])])],1)],1)]),e._v(" "),a("swiper-slide",[a("div",{staticClass:"content-item network-bank"},[a("div",{staticClass:"bank-information"},[a("div",{staticClass:"user-name"},[a("span",[e._v("\n                    "+e._s(e.$t("pay_order.user_name"))+"\n                  ")]),e._v(" "),a("span",[e._v("\n                    "+e._s(e.bank.userName)+"\n                  ")])]),e._v(" "),a("div",{staticClass:"bank-name"},[a("span",[e._v("\n                    "+e._s(e.$t("pay_order.bank_name"))+"\n                  ")]),e._v(" "),a("span",[e._v("\n                    "+e._s(e.bank.bankName)+"\n                  ")])]),e._v(" "),a("div",{staticClass:"deposit-account"},[a("span",[e._v("\n                    "+e._s(e.$t("pay_order.deposit_account"))+"\n                  ")]),e._v(" "),a("span",[e._v("\n                    "+e._s(e.bank.depositAccount)+"\n                  ")])]),e._v(" "),a("div",{staticClass:"transfer-amount"},[a("span",[e._v("\n                    "+e._s(e.$t("pay_order.transfer_amount"))+"\n                  ")]),e._v(" "),a("h3",[a("span",[e._v("\n                      "+e._s(e.$t("common.currency_symbol"))+"\n                    ")]),e._v("\n                    "+e._s(e.bank.transferAmount)+"\n                  ")])]),e._v(" "),a("div",{staticClass:"transfer-remark"},[a("span",[e._v("\n                    "+e._s(e.$t("pay_order.transfer_remark"))+"\n                  ")]),e._v(" "),a("span",[e._v("\n                    "+e._s(e.bank.remark)+"\n                  ")])])]),e._v(" "),a("ul",{staticClass:"transfer-tips"},[a("li",[e._v("\n                  "+e._s(e.$t("pay_order.tips_01"))+"\n                ")]),e._v(" "),a("li",[e._v("\n                  "+e._s(e.$t("pay_order.tips_02"))+"\n                ")])])])])],1)],1)]),e._v(" "),a("div",{staticClass:"confirm-payment-wrapper"},[a("el-checkbox",{attrs:{label:e.$t("pay_order.confirm_pay_status")},model:{value:e.confirmStatus,callback:function(t){e.confirmStatus=t},expression:"confirmStatus"}})],1),e._v(" "),a("el-button",{attrs:{disabled:!e.confirmStatus,round:!0,type:"primary"},on:{click:function(t){e.handleSubmit()}}},[e._v("\n      "+e._s(e.$t("pay_order.pay_already"))+"\n    ")])],1)])},[],!1,null,"2b508d1a",null);o.options.__file="index.vue";t.default=o.exports},DPiB:function(e,t,a){},W0nf:function(e,t,a){"use strict";var s=a("DPiB");a.n(s).a}}]);