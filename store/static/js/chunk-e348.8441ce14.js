(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e348"],{"60V4":function(e,t,r){"use strict";r.r(t);var a=r("KTTK"),i={name:"SupplementInformation",data:function(){return{command:"",paramsData:{},from:"",countryList:[],defaultActionUrl:this.$constant.DEFAULT_ACTION,picList:[],dialogImagePreviewDisplay:!1,currentPreviewImg:"",fileTypeAccept:this.$constant.DEFAULT_PICTURE_ACCEPT,hasAcceptAgreement:!1,form:{enterpriseName:"",country:1,enterpriseID:"",contact:"",address:"",picFile:null},rules:{enterpriseName:[{required:!0,message:this.$t("supplement_information_main.rules.enterprise_name.required"),trigger:"blur"},{max:60,message:this.$t("supplement_information_main.rules.enterprise_name.required"),trigger:"blur"}],country:[{required:!0,message:this.$t("supplement_information_main.rules.country.required"),trigger:"change"}],enterpriseID:[{required:!0,message:this.$t("supplement_information_main.rules.enterprise_id.required"),trigger:"blur"}],contact:[{required:!0,message:this.$t("supplement_information_main.rules.contact.required"),trigger:"blur"}],address:[{required:!0,message:this.$t("supplement_information_main.rules.address.required"),trigger:"blur"},{max:200,message:this.$t("supplement_information_main.rules.address.range")}],picFile:[{required:!0,message:this.$t("supplement_information_main.rules.image.required"),trigger:"blur"}]}}},created:function(){},methods:{postSupolementInformation:function(){var e=this;a.w(this.form.enterpriseName,this.form.country,this.form.enterpriseID,this.form.contact,this.form.address,this.form.picFile).then(function(t){1===t.Status?(e.$notify.success({title:e.$t("common.dialog_title"),message:e.$t("common.success")}),e.$store.dispatch("ToggleSupplementState",!0),e.$router.go(-1)):e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t),e.$parent.$parent.showCommonErrorDialog(function(){e.postSupolementInformation()})})},onSubmit:function(){var e=this;console.log(this.form.picFile),this.$refs.form.validate(function(t){if(!t)return!1;e.postSupolementInformation()})},getRouteParams:function(){var e=this.$route.params.from;e?localStorage.setItem("supplement-params-from",e):e=localStorage.getItem("supplement-params-from"),this.from=e;var t=this.$route.params.command;t?localStorage.setItem("supplement-params-command",t):t=localStorage.getItem("supplement-params-command"),this.command=t;var r=this.$route.params.data;r?localStorage.setItem("supplement-params-data",t):r=localStorage.getItem("supplement-params-data"),r&&(this.paramsData=JSON.parse(r))},bindParams:function(){this.paramsData&&(this.form.enterpriseName=this.paramsData.name,this.form.country=this.paramsData.country_id,this.form.enterpriseID=this.paramsData.business_license,this.form.contact=this.paramsData.phone,this.form.address=this.paramsData.address,this.paramsData.img&&-1!==this.paramsData.img.indexOf(".")&&this.picList.push({name:"license.jpg",url:this.paramsData.img}))},getActionPath:function(){return this.defaultActionUrl},handlePicRemove:function(e,t){},handlePicCountOverflow:function(e,t){},handlePicUploadSuccess:function(e,t,r){this.form.img=URL.createObjectURL(t.raw)},handlePicFile:function(e){this.form.picFile=e.file},beforePicUpload:function(e){var t="image/jpeg"===e.type,r="image/png"===e.type,a=e.size/1024/1024<2;return t||r||this.$message.error(this.$t("supplement_information_main.rules.image.format")),a||this.$message.error(this.$t("supplement_information_main.rules.image.range")),(t||r)&&a}}},n=(r("DSTQ"),r("KHd+")),s=Object(n.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"supplement-information-container"},[r("h3",[e._v("\n    "+e._s(e.$t("supplement_information_main.title"))+"\n  ")]),e._v(" "),r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"160px"}},[r("el-form-item",{attrs:{label:e.$t("supplement_information_main.enterprise_name"),prop:"enterpriseName"}},[r("el-input",{attrs:{placeholder:e.$t("supplement_information_main.placehold.enterprise_name")},model:{value:e.form.enterpriseName,callback:function(t){e.$set(e.form,"enterpriseName",t)},expression:"form.enterpriseName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("supplement_information_main.enterprise_id"),prop:"enterpriseID"}},[r("el-input",{attrs:{placeholder:e.$t("supplement_information_main.placehold.enterprise_id")},model:{value:e.form.enterpriseID,callback:function(t){e.$set(e.form,"enterpriseID",t)},expression:"form.enterpriseID"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("supplement_information_main.contact"),prop:"contact"}},[r("el-input",{attrs:{placeholder:e.$t("supplement_information_main.placehold.contact")},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("supplement_information_main.address"),prop:"address"}},[r("el-input",{attrs:{placeholder:e.$t("supplement_information_main.placehold.address")},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("supplement_information_main.enterprise_photo"),prop:"picFile"}},[r("el-upload",{ref:"uploadPic",attrs:{multiple:!1,limit:1,action:e.getActionPath(),"on-remove":e.handlePicRemove,"on-exceed":e.handlePicCountOverflow,"on-success":e.handlePicUploadSuccess,"before-upload":e.beforePicUpload,"http-request":e.handlePicFile,"file-list":e.picList,"list-type":"picture-card"}},[r("el-button",{attrs:{round:!0,plain:!0,size:"medium",type:"primary"}},[e._v(e._s(e.$t("supplement_information_main.add_photo")))]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$t("supplement_information_main.photo_tips")))])],1)],1),e._v(" "),r("el-form-item",[r("el-checkbox",{attrs:{label:e.$t("supplement_information_main.confirm_information")},model:{value:e.hasAcceptAgreement,callback:function(t){e.hasAcceptAgreement=t},expression:"hasAcceptAgreement"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{disabled:!e.hasAcceptAgreement,round:!0,type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v(e._s(e.$t("supplement_information_main.submit")))])],1)],1)],1)},[],!1,null,"09da2189",null);s.options.__file="index.vue";t.default=s.exports},DSTQ:function(e,t,r){"use strict";var a=r("OqGo");r.n(a).a},OqGo:function(e,t,r){}}]);