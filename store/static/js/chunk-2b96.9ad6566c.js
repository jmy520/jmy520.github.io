(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2b96"],{"1NT6":function(e,t,a){},"6cao":function(e,t,a){a("h6RI"),e.exports=Math.pow(2,-52)},"7Qib":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return o});a("mjEM");var r=a("EJiy"),n=a.n(r),i=a("mSNy");function s(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",r=void 0;"object"===(void 0===e?"undefined":n()(e))?r=e:(10===(""+e).length&&(e=1e3*parseInt(e)),r=new Date(e));var s={y:r.getFullYear(),m:r.getMonth()+1,d:r.getDate(),h:r.getHours(),i:r.getMinutes(),s:r.getSeconds(),a:r.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=s[t];return"a"===t?[i.a.t("js_vals.time_sun"),i.a.t("js_vals.time_mon"),i.a.t("js_vals.time_tue"),i.a.t("js_vals.time_wed"),i.a.t("js_vals.time_thu"),i.a.t("js_vals.time_fri"),i.a.t("js_vals.time_sat")][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function o(e){if(e<1){var t=(e||0).toString();return t.length>8?t.slice(0,8):t}var a="",r=(e||0).toString().split("."),n=r[0],i=r.length>1?"."+r[1]:"";for(i.length>3&&(i=i.slice(0,3));n.length>3;)a=","+n.slice(-3)+a,n=n.slice(0,n.length-3);return n&&(a=n+a),a+=i}},h6RI:function(e,t,a){var r=a("Y7ZC");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},ihHt:function(e,t,a){"use strict";a.r(t);var r=a("7Qib"),n=a("KTTK"),i={name:"OrderDetail",data:function(){return{stepIndex:0,orderDetailData:{},cancelOrderFlag:!1,confirmReceiveFlag:!1,confirmReceivePassword:"",cancelOrderForm:{orderNumber:"",cancelCause:"",remark:""},cancelOrderFormRules:{cancelCause:[{required:!0,message:this.$t("personal_center.dialog.cancel_order.cancel_cause_none"),trigger:"change"}]}}},created:function(){},mounted:function(){this.fetchOrderDetail()},methods:{formatNumber:r.a,parseTime:r.b,fetchCancelCauseList:function(){var e=this;n.j().then(function(t){1===t.Status?e.cancelOrderCauseList=t.Result:e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t.message),e.$notify.error({title:e.$t("common.dialog_title"),message:t.message})})},fetchOrderDetail:function(){var e=this;n.p(this.getOrderId()).then(function(t){1===t.Status?(e.orderDetailData=t.Result,setTimeout(function(){var t=e.orderDetailData.pay_type;e.stepIndex=0===t||2===t?1:1===t?2:3===t||4===t?t:0},300)):e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t),e.$parent.$parent.showCommonErrorDialog(function(){e.fetchOrderDetail()})})},postReceiveOrder:function(){var e=this;n.c(this.orderDetailData.id,this.confirmReceivePassword).then(function(t){1===t.Status?(e.confirmReceiveFlag=!1,e.$notify.success({title:e.$t("common.dialog_title"),message:e.$t("common.success")}),e.fetchOrderDetail()):e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t.message),e.$notify.error({title:e.$t("common.dialog_title"),message:t.message})})},postCancelOrder:function(){var e=this;n.a(this.orderDetailData.id,this.cancelOrderForm.cancelCause,this.cancelOrderForm.remark).then(function(t){1===t.Status?(e.cancelOrderFlag=!1,e.$notify.success({title:e.$t("common.dialog_title"),message:e.$t("common.success")}),e.fetchOrderDetail()):e.$notify.error({title:e.$t("common.dialog_title"),message:t.ErrMsg})}).catch(function(t){console.error(t.message),e.$notify.error({title:e.$t("common.dialog_title"),message:t.message})})},getOrderId:function(){var e=this.$route.params.orderId;return e?localStorage.setItem("order-detail-key-order-id",e):e=localStorage.getItem("order-detail-key-order-id"),e},getStateName:function(e){return 0===e.pay_type?this.$t("order_detail.state_wait_payment"):1===e.pay_type?this.$t("order_detail.state_wait_send"):2===e.pay_type?this.$t("order_detail.state_canceled"):3===e.state?this.$t("order_detail.state_sended"):this.$t("order_detail.state_finished")},handleGoPayment:function(){this.$router.push({name:"PayOrder",params:{orderId:this.getOrderId()}})},handleConfirmReceive:function(){this.confirmReceiveFlag=!0},handleCancelOrder:function(){this.cancelOrderForm.orderNumber=this.orderDetailData.order_no,this.fetchCancelCauseList(),this.cancelOrderFlag=!0},handleConfirmCancelOrder:function(){var e=this;this.$refs.cancelOrderForm.validate(function(t){if(!t)return!1;e.postCancelOrder()})},handleDialogConfirmReceive:function(){this.confirmReceivePassword?this.postReceiveOrder():this.$notify.warning({title:this.$t("common.dialog_title"),message:this.$t("personal_center.dialog.confirm_receive.password_none")})}}},s=(a("sDq6"),a("KHd+")),o=Object(s.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-detail-container"},[a("div",{staticClass:"main-content"},[a("div",{staticClass:"state-wrapper"},[a("div",{staticClass:"state-item"},[a("h4",[e._v("\n          "+e._s(e.$t("order_detail.header_state_generate_order"))+"\n        ")]),e._v(" "),a("h6",[e._v("\n          "+e._s(e.parseTime(e.orderDetailData.add_time))+"\n        ")]),e._v(" "),a("div",{staticClass:"step index01",class:e.stepIndex>0?"active":""},[e._v("\n          1\n        ")])]),e._v(" "),a("div",{staticClass:"state-item"},[a("h4",[e._v("\n          "+e._s(e.$t("order_detail.header_state_wait_payment"))+"\n        ")]),e._v(" "),a("h6",[e._v("\n          "+e._s(e.stepIndex>1?e.parseTime(e.orderDetailData.delivery_time):" ")+"\n        ")]),e._v(" "),a("div",{staticClass:"step index02",class:e.stepIndex>1?"active":""},[e._v("\n          2\n        ")])]),e._v(" "),a("div",{staticClass:"state-item"},[a("h4",[e._v("\n          "+e._s(e.$t("order_detail.header_state_wait_send"))+"\n        ")]),e._v(" "),a("h6",[e._v("\n          "+e._s(e.stepIndex>2?e.parseTime(e.delivery_time):" ")+"\n        ")]),e._v(" "),a("div",{staticClass:"step index03",class:e.stepIndex>2?"active":""},[e._v("\n          3\n        ")])]),e._v(" "),a("div",{staticClass:"state-item"},[a("h4",[e._v("\n          "+e._s(e.$t("order_detail.header_state_wait_receive"))+"\n        ")]),e._v(" "),a("h6",[e._v("\n          "+e._s(e.stepIndex>3?e.parseTime(e.receipt_time):" ")+"\n        ")]),e._v(" "),a("div",{staticClass:"step index04",class:e.stepIndex>3?"active":""},[e._v("\n          4\n        ")])]),e._v(" "),a("div",{staticClass:"step-line",class:1===e.stepIndex?"index01":2===e.stepIndex?"index02":3===e.stepIndex?"index03":4===e.stepIndex?"index04":""})]),e._v(" "),a("div",{staticClass:"order-information"},[a("h4",[e._v("\n        "+e._s(e.$t("order_detail.order_information"))+"\n      ")]),e._v(" "),a("el-row",{staticClass:"table-header"},[a("el-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.$t("order_detail.receiver_information"))+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.$t("order_detail.payment_information"))+"\n        ")]),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n          "+e._s(e.$t("order_detail.invoice_information"))+"\n        ")])],1),e._v(" "),a("el-row",{staticClass:"content-wrapper"},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.receiver_name"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.receipt_name)+"\n            ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.receive_address"))+"\n            ")]),e._v(" "),a("span",{attrs:{title:e.orderDetailData.address}},[e._v("\n              "+e._s(e.orderDetailData.detail_address)+"\n            ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.contact_telephone"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.receipt_phone)+"\n            ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.remark"))+"\n            ")]),e._v(" "),a("span",{attrs:{title:e.orderDetailData.remark}},[e._v("\n              "+e._s(e.orderDetailData.remake)+"\n            ")])])]),e._v(" "),a("el-col",{attrs:{span:8}},[0===e.orderDetailData.pay_type||2===e.orderDetailData.pay_type?a("div",{staticClass:"have-no-payment"},[e._v("\n            "+e._s(0===e.orderDetailData.pay_type?e.$t("order_detail.state_wait_payment"):e.$t("order_detail.state_canceled"))+"\n          ")]):e._e(),e._v(" "),1===e.orderDetailData.pay_type||3===e.orderDetailData.pay_type||4===e.orderDetailData.pay_type?a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.payment_method"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.pm_name)+"\n            ")])]):e._e(),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.real_time_exchange_rate"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.$t("order_detail.real_time_exchange_rate_value",[1,e.orderDetailData.cny]))+"\n            ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.payment_amount"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.actual_pay_money)+"\n            ")])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.invoice_type"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.invoice_type_name)+"\n            ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.invoice_header"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.invoice_title)+"\n            ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.invoice_id"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.business)+"\n            ")])])])],1)],1),e._v(" "),3===e.orderDetailData.pay_type||4===e.orderDetailData.pay_type?a("div",{staticClass:"logistics-information"},[a("h4",[e._v("\n        "+e._s(e.$t("order_detail.logistics_information"))+"\n      ")]),e._v(" "),a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"row-item"},[a("span",[e._v("\n            "+e._s(e.$t("order_detail.send_time"))+"\n          ")]),e._v(" "),a("span",[e._v("\n            "+e._s(e.parseTime(e.orderDetailData.delivery_time))+"\n          ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n            "+e._s(e.$t("order_detail.logistics_company"))+"\n          ")]),e._v(" "),a("span",[e._v("\n            "+e._s(e.orderDetailData.logistics_name)+"\n          ")])]),e._v(" "),a("div",{staticClass:"row-item"},[a("span",[e._v("\n            "+e._s(e.$t("order_detail.logistics_number"))+"\n          ")]),e._v(" "),a("span",[e._v("\n            "+e._s(e.orderDetailData.logistics_number)+"\n          ")])])])]):e._e(),e._v(" "),a("div",{staticClass:"goods-list"},[a("h4",[e._v("\n        "+e._s(e.$t("order_detail.goods_list"))+"\n      ")]),e._v(" "),a("div",{staticClass:"table-header"},[a("span",[e._v("\n          "+e._s(e.$t("order_detail.goods_information"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.$t("order_detail.price"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.$t("order_detail.count"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.$t("order_detail.real_payment_amount"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.$t("order_detail.current_state"))+"\n        ")]),e._v(" "),a("span",[e._v("\n          "+e._s(e.$t("common.operation"))+"\n        ")])]),e._v(" "),a("div",{staticClass:"table-body"},[a("div",{staticClass:"order-item"},[a("div",{staticClass:"order-item-header"},[a("span",[e._v("\n              "+e._s(e.$t("order_detail.order_number"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.orderDetailData.order_no)+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.$t("order_detail.order_time"))+"\n            ")]),e._v(" "),a("span",[e._v("\n              "+e._s(e.parseTime(e.orderDetailData.add_time))+"\n            ")])]),e._v(" "),a("div",{staticClass:"order-item-content"},[a("div",{staticClass:"order-inner-item-wrapper"},e._l(e.orderDetailData.goods,function(t,r){return a("div",{key:r,staticClass:"inner-item"},[a("el-image",{attrs:{src:t.logo,fit:"cover"}}),e._v(" "),a("div",{staticClass:"name-wrapper"},[a("span",[e._v("\n                    "+e._s(t.name)+"\n                  ")])]),e._v(" "),a("span",[e._v("\n                  "+e._s(e.$t("common.currency_symbol"))+"\n                  "+e._s(t.price)+"\n                ")]),e._v(" "),a("span",[e._v("\n                  "+e._s(t.buy_cnt)+"\n                ")])],1)})),e._v(" "),a("div",{staticClass:"amount"},[a("div",{staticClass:"amount-inner"},[a("span",[e._v("\n                  "+e._s(e.$t("common.currency_symbol"))+"\n                  "+e._s(e.orderDetailData.actual_pay_money)+"\n                ")])])]),e._v(" "),a("div",{staticClass:"state"},[a("div",{staticClass:"state-inner"},[a("span",[e._v("\n                  "+e._s(e.getStateName(e.orderDetailData))+"\n                ")])])]),e._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button-wrapper"},[0===e.orderDetailData.pay_type?a("el-button",{attrs:{round:!0,type:"primary"},on:{click:function(t){e.handleGoPayment()}}},[e._v("\n                  "+e._s(e.$t("order_detail.go_payment"))+"\n                ")]):e._e(),e._v(" "),3===e.orderDetailData.pay_type?a("el-button",{attrs:{round:!0,type:"primary"},on:{click:function(t){e.handleConfirmReceive()}}},[e._v("\n                  "+e._s(e.$t("order_detail.confirm_receive"))+"\n                ")]):e._e(),e._v(" "),0===e.orderDetailData.pay_type?a("el-button",{attrs:{type:"text"},on:{click:function(t){e.handleCancelOrder()}}},[e._v("\n                  "+e._s(e.$t("order_detail.cancel_order"))+"\n                ")]):e._e()],1)])])])])])]),e._v(" "),a("el-dialog",{staticClass:"cancel-order-dialog",attrs:{"close-on-click-modal":!1,visible:e.cancelOrderFlag},on:{"update:visible":function(t){e.cancelOrderFlag=t}}},[a("div",{staticClass:"cancel-order-dialog-content"},[a("h4",[e._v("\n        "+e._s(e.$t("order_detail.dialog.cancel_order.title"))+"\n      ")]),e._v(" "),a("el-form",{ref:"cancelOrderForm",attrs:{rules:e.cancelOrderFormRules,model:e.cancelOrderForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.$t("order_detail.dialog.cancel_order.order_number")}},[a("el-input",{model:{value:e.cancelOrderForm.orderNumber,callback:function(t){e.$set(e.cancelOrderForm,"orderNumber",t)},expression:"cancelOrderForm.orderNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("order_detail.dialog.cancel_order.cancel_cause"),prop:"cancelCause"}},[a("el-select",{attrs:{placeholder:e.$t("common.select_default")},model:{value:e.cancelOrderForm.cancelCause,callback:function(t){e.$set(e.cancelOrderForm,"cancelCause",t)},expression:"cancelOrderForm.cancelCause"}},e._l(e.cancelOrderCauseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("order_detail.dialog.cancel_order.remark")}},[a("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.cancelOrderForm.remark,callback:function(t){e.$set(e.cancelOrderForm,"remark",t)},expression:"cancelOrderForm.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{round:!0},on:{click:function(t){e.cancelOrderFlag=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),a("el-button",{attrs:{round:!0,type:"primary"},on:{click:function(t){e.handleConfirmCancelOrder()}}},[e._v(e._s(e.$t("common.confirm")))])],1)],1)],1)]),e._v(" "),a("el-dialog",{staticClass:"confirm-receive-dialog",attrs:{"close-on-click-modal":!1,visible:e.confirmReceiveFlag},on:{"update:visible":function(t){e.confirmReceiveFlag=t}}},[a("div",{staticClass:"confirm-receive-dialog-content"},[a("h4",[e._v("\n        "+e._s(e.$t("order_detail.dialog.confirm_receive.title"))+"\n      ")]),e._v(" "),a("div",{staticClass:"content-wrapper"},[a("p",[e._v("\n          "+e._s(e.$t("order_detail.dialog.confirm_receive.description"))+"\n        ")]),e._v(" "),a("el-input",{attrs:{placeholder:e.$t("order_detail.dialog.confirm_receive.password_placehold")},model:{value:e.confirmReceivePassword,callback:function(t){e.confirmReceivePassword=t},expression:"confirmReceivePassword"}}),e._v(" "),a("div",{staticClass:"button-container"},[a("el-button",{attrs:{round:!0},on:{click:function(t){e.confirmReceiveFlag=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),a("el-button",{attrs:{round:!0,type:"primary"},on:{click:function(t){e.handleDialogConfirmReceive()}}},[e._v(e._s(e.$t("order_detail.dialog.confirm_receive.confirm_receive")))])],1)],1)])])],1)},[],!1,null,"59681787",null);o.options.__file="index.vue";t.default=o.exports},mjEM:function(e,t,a){e.exports={default:a("6cao"),__esModule:!0}},sDq6:function(e,t,a){"use strict";var r=a("1NT6");a.n(r).a}}]);