"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3017],{7152:(be,he,ee)=>{ee.d(he,{z:()=>S});var c=ee(6682);const ie={type:"change"},le={type:"start"},F={type:"end"};class S extends c.pBf{constructor(y,_){super(),void 0===_&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),_===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=y,this.domElement=_,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new c.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:c.RsA.ROTATE,MIDDLE:c.RsA.DOLLY,RIGHT:c.RsA.PAN},this.touches={ONE:c.QmN.ROTATE,TWO:c.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return I.phi},this.getAzimuthalAngle=function(){return I.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(u){u.addEventListener("keydown",f),this._domElementKeyEvents=u},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(ie),r.update(),m=d.NONE},this.update=function(){const u=new c.Pa4,P=(new c._fP).setFromUnitVectors(y.up,new c.Pa4(0,1,0)),J=P.clone().invert(),X=new c.Pa4,Q=new c._fP,ce=2*Math.PI;return function(){const Le=r.object.position;u.copy(Le).sub(r.target),u.applyQuaternion(P),I.setFromVector3(u),r.autoRotate&&m===d.NONE&&$(function G(){return 2*Math.PI/60/60*r.autoRotateSpeed}()),r.enableDamping?(I.theta+=C.theta*r.dampingFactor,I.phi+=C.phi*r.dampingFactor):(I.theta+=C.theta,I.phi+=C.phi);let ue=r.minAzimuthAngle,oe=r.maxAzimuthAngle;return isFinite(ue)&&isFinite(oe)&&(ue<-Math.PI?ue+=ce:ue>Math.PI&&(ue-=ce),oe<-Math.PI?oe+=ce:oe>Math.PI&&(oe-=ce),I.theta=ue<=oe?Math.max(ue,Math.min(oe,I.theta)):I.theta>(ue+oe)/2?Math.max(ue,I.theta):Math.min(oe,I.theta)),I.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,I.phi)),I.makeSafe(),I.radius*=g,I.radius=Math.max(r.minDistance,Math.min(r.maxDistance,I.radius)),!0===r.enableDamping?r.target.addScaledVector(p,r.dampingFactor):r.target.add(p),u.setFromSpherical(I),u.applyQuaternion(J),Le.copy(r.target).add(u),r.object.lookAt(r.target),!0===r.enableDamping?(C.theta*=1-r.dampingFactor,C.phi*=1-r.dampingFactor,p.multiplyScalar(1-r.dampingFactor)):(C.set(0,0,0),p.set(0,0,0)),g=1,!!(w||X.distanceToSquared(r.object.position)>L||8*(1-Q.dot(r.object.quaternion))>L)&&(r.dispatchEvent(ie),X.copy(r.object.position),Q.copy(r.object.quaternion),w=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",V),r.domElement.removeEventListener("pointerdown",s),r.domElement.removeEventListener("pointercancel",l),r.domElement.removeEventListener("wheel",b),r.domElement.removeEventListener("pointermove",i),r.domElement.removeEventListener("pointerup",n),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",f)};const r=this,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let m=d.NONE;const L=1e-6,I=new c.$V,C=new c.$V;let g=1;const p=new c.Pa4;let w=!1;const T=new c.FM8,R=new c.FM8,O=new c.FM8,v=new c.FM8,B=new c.FM8,D=new c.FM8,z=new c.FM8,U=new c.FM8,K=new c.FM8,N=[],q={};function W(){return Math.pow(.95,r.zoomSpeed)}function $(u){C.theta-=u}function te(u){C.phi-=u}const me=function(){const u=new c.Pa4;return function(J,X){u.setFromMatrixColumn(X,0),u.multiplyScalar(-J),p.add(u)}}(),re=function(){const u=new c.Pa4;return function(J,X){!0===r.screenSpacePanning?u.setFromMatrixColumn(X,1):(u.setFromMatrixColumn(X,0),u.crossVectors(r.object.up,u)),u.multiplyScalar(J),p.add(u)}}(),ne=function(){const u=new c.Pa4;return function(J,X){const Q=r.domElement;if(r.object.isPerspectiveCamera){u.copy(r.object.position).sub(r.target);let de=u.length();de*=Math.tan(r.object.fov/2*Math.PI/180),me(2*J*de/Q.clientHeight,r.object.matrix),re(2*X*de/Q.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(me(J*(r.object.right-r.object.left)/r.object.zoom/Q.clientWidth,r.object.matrix),re(X*(r.object.top-r.object.bottom)/r.object.zoom/Q.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function Z(u){r.object.isPerspectiveCamera?g/=u:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*u)),r.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ae(u){r.object.isPerspectiveCamera?g*=u:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/u)),r.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function xe(u){T.set(u.clientX,u.clientY)}function fe(u){v.set(u.clientX,u.clientY)}function Me(){1===N.length?T.set(N[0].pageX,N[0].pageY):T.set(.5*(N[0].pageX+N[1].pageX),.5*(N[0].pageY+N[1].pageY))}function Re(){1===N.length?v.set(N[0].pageX,N[0].pageY):v.set(.5*(N[0].pageX+N[1].pageX),.5*(N[0].pageY+N[1].pageY))}function Ee(){const u=N[0].pageX-N[1].pageX,P=N[0].pageY-N[1].pageY,J=Math.sqrt(u*u+P*P);z.set(0,J)}function _e(u){if(1==N.length)R.set(u.pageX,u.pageY);else{const J=se(u);R.set(.5*(u.pageX+J.x),.5*(u.pageY+J.y))}O.subVectors(R,T).multiplyScalar(r.rotateSpeed);const P=r.domElement;$(2*Math.PI*O.x/P.clientHeight),te(2*Math.PI*O.y/P.clientHeight),T.copy(R)}function E(u){if(1===N.length)B.set(u.pageX,u.pageY);else{const P=se(u);B.set(.5*(u.pageX+P.x),.5*(u.pageY+P.y))}D.subVectors(B,v).multiplyScalar(r.panSpeed),ne(D.x,D.y),v.copy(B)}function t(u){const P=se(u),J=u.pageX-P.x,X=u.pageY-P.y,Q=Math.sqrt(J*J+X*X);U.set(0,Q),K.set(0,Math.pow(U.y/z.y,r.zoomSpeed)),Z(K.y),z.copy(U)}function s(u){!1!==r.enabled&&(0===N.length&&(r.domElement.setPointerCapture(u.pointerId),r.domElement.addEventListener("pointermove",i),r.domElement.addEventListener("pointerup",n)),function Y(u){N.push(u)}(u),"touch"===u.pointerType?function M(u){switch(H(u),N.length){case 1:switch(r.touches.ONE){case c.QmN.ROTATE:if(!1===r.enableRotate)return;Me(),m=d.TOUCH_ROTATE;break;case c.QmN.PAN:if(!1===r.enablePan)return;Re(),m=d.TOUCH_PAN;break;default:m=d.NONE}break;case 2:switch(r.touches.TWO){case c.QmN.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;(function ke(){r.enableZoom&&Ee(),r.enablePan&&Re()})(),m=d.TOUCH_DOLLY_PAN;break;case c.QmN.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function we(){r.enableZoom&&Ee(),r.enableRotate&&Me()})(),m=d.TOUCH_DOLLY_ROTATE;break;default:m=d.NONE}break;default:m=d.NONE}m!==d.NONE&&r.dispatchEvent(le)}(u):function a(u){let P;switch(u.button){case 0:P=r.mouseButtons.LEFT;break;case 1:P=r.mouseButtons.MIDDLE;break;case 2:P=r.mouseButtons.RIGHT;break;default:P=-1}switch(P){case c.RsA.DOLLY:if(!1===r.enableZoom)return;(function Te(u){z.set(u.clientX,u.clientY)})(u),m=d.DOLLY;break;case c.RsA.ROTATE:if(u.ctrlKey||u.metaKey||u.shiftKey){if(!1===r.enablePan)return;fe(u),m=d.PAN}else{if(!1===r.enableRotate)return;xe(u),m=d.ROTATE}break;case c.RsA.PAN:if(u.ctrlKey||u.metaKey||u.shiftKey){if(!1===r.enableRotate)return;xe(u),m=d.ROTATE}else{if(!1===r.enablePan)return;fe(u),m=d.PAN}break;default:m=d.NONE}m!==d.NONE&&r.dispatchEvent(le)}(u))}function i(u){!1!==r.enabled&&("touch"===u.pointerType?function k(u){switch(H(u),m){case d.TOUCH_ROTATE:if(!1===r.enableRotate)return;_e(u),r.update();break;case d.TOUCH_PAN:if(!1===r.enablePan)return;E(u),r.update();break;case d.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;(function e(u){r.enableZoom&&t(u),r.enablePan&&E(u)})(u),r.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;(function o(u){r.enableZoom&&t(u),r.enableRotate&&_e(u)})(u),r.update();break;default:m=d.NONE}}(u):function h(u){if(!1!==r.enabled)switch(m){case d.ROTATE:if(!1===r.enableRotate)return;!function Ie(u){R.set(u.clientX,u.clientY),O.subVectors(R,T).multiplyScalar(r.rotateSpeed);const P=r.domElement;$(2*Math.PI*O.x/P.clientHeight),te(2*Math.PI*O.y/P.clientHeight),T.copy(R),r.update()}(u);break;case d.DOLLY:if(!1===r.enableZoom)return;!function Oe(u){U.set(u.clientX,u.clientY),K.subVectors(U,z),K.y>0?Z(W()):K.y<0&&ae(W()),z.copy(U),r.update()}(u);break;case d.PAN:if(!1===r.enablePan)return;!function Pe(u){B.set(u.clientX,u.clientY),D.subVectors(B,v).multiplyScalar(r.panSpeed),ne(D.x,D.y),v.copy(B),r.update()}(u)}}(u))}function n(u){j(u),0===N.length&&(r.domElement.releasePointerCapture(u.pointerId),r.domElement.removeEventListener("pointermove",i),r.domElement.removeEventListener("pointerup",n)),r.dispatchEvent(F),m=d.NONE}function l(u){j(u)}function b(u){!1===r.enabled||!1===r.enableZoom||m!==d.NONE||(u.preventDefault(),r.dispatchEvent(le),function Ae(u){u.deltaY<0?ae(W()):u.deltaY>0&&Z(W()),r.update()}(u),r.dispatchEvent(F))}function f(u){!1===r.enabled||!1===r.enablePan||function ye(u){let P=!1;switch(u.code){case r.keys.UP:ne(0,r.keyPanSpeed),P=!0;break;case r.keys.BOTTOM:ne(0,-r.keyPanSpeed),P=!0;break;case r.keys.LEFT:ne(r.keyPanSpeed,0),P=!0;break;case r.keys.RIGHT:ne(-r.keyPanSpeed,0),P=!0}P&&(u.preventDefault(),r.update())}(u)}function V(u){!1!==r.enabled&&u.preventDefault()}function j(u){delete q[u.pointerId];for(let P=0;P<N.length;P++)if(N[P].pointerId==u.pointerId)return void N.splice(P,1)}function H(u){let P=q[u.pointerId];void 0===P&&(P=new c.FM8,q[u.pointerId]=P),P.set(u.pageX,u.pageY)}function se(u){return q[(u.pointerId===N[0].pointerId?N[1]:N[0]).pointerId]}r.domElement.addEventListener("contextmenu",V),r.domElement.addEventListener("pointerdown",s),r.domElement.addEventListener("pointercancel",l),r.domElement.addEventListener("wheel",b,{passive:!1}),this.update()}}},8317:(be,he,ee)=>{ee.d(he,{M:()=>ie});var c=ee(6682);class ie extends c.O7d{constructor(F,S={}){const x=S.font;if(void 0===x)super();else{const A=x.generateShapes(F,S.size);S.depth=void 0!==S.height?S.height:50,void 0===S.bevelThickness&&(S.bevelThickness=10),void 0===S.bevelSize&&(S.bevelSize=8),void 0===S.bevelEnabled&&(S.bevelEnabled=!1),super(A,S)}this.type="TextGeometry"}}},9011:(be,he,ee)=>{ee.d(he,{_:()=>le});var c=ee(6682);const ie=new WeakMap;class le extends c.aNw{constructor(x){super(x),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(x){return this.decoderPath=x,this}setDecoderConfig(x){return this.decoderConfig=x,this}setWorkerLimit(x){return this.workerLimit=x,this}load(x,A,y,_){const r=new c.hH6(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(x,d=>{this.decodeGeometry(d,{attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1}).then(A).catch(_)},y,_)}decodeDracoFile(x,A,y,_){this.decodeGeometry(x,{attributeIDs:y||this.defaultAttributeIDs,attributeTypes:_||this.defaultAttributeTypes,useUniqueIDs:!!y}).then(A)}decodeGeometry(x,A){for(const L in A.attributeTypes){const I=A.attributeTypes[L];void 0!==I.BYTES_PER_ELEMENT&&(A.attributeTypes[L]=I.name)}const y=JSON.stringify(A);if(ie.has(x)){const L=ie.get(x);if(L.key===y)return L.promise;if(0===x.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let _;const r=this.workerNextTaskID++,m=this._getWorker(r,x.byteLength).then(L=>(_=L,new Promise((I,C)=>{_._callbacks[r]={resolve:I,reject:C},_.postMessage({type:"decode",id:r,taskConfig:A,buffer:x},[x])}))).then(L=>this._createGeometry(L.geometry));return m.catch(()=>!0).then(()=>{_&&r&&this._releaseTask(_,r)}),ie.set(x,{key:y,promise:m}),m}_createGeometry(x){const A=new c.u9r;x.index&&A.setIndex(new c.TlE(x.index.array,1));for(let y=0;y<x.attributes.length;y++){const _=x.attributes[y];A.setAttribute(_.name,new c.TlE(_.array,_.itemSize))}return A}_loadLibrary(x,A){const y=new c.hH6(this.manager);return y.setPath(this.decoderPath),y.setResponseType(A),y.setWithCredentials(this.withCredentials),new Promise((_,r)=>{y.load(x,_,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const x="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,A=[];return x?A.push(this._loadLibrary("draco_decoder.js","text")):(A.push(this._loadLibrary("draco_wasm_wrapper.js","text")),A.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(A).then(y=>{const _=y[0];x||(this.decoderConfig.wasmBinary=y[1]);const r=F.toString(),d=["/* draco decoder */",_,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([d]))}),this.decoderPending}_getWorker(x,A){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const _=new Worker(this.workerSourceURL);_._callbacks={},_._taskCosts={},_._taskLoad=0,_.postMessage({type:"init",decoderConfig:this.decoderConfig}),_.onmessage=function(r){const d=r.data;switch(d.type){case"decode":_._callbacks[d.id].resolve(d);break;case"error":_._callbacks[d.id].reject(d);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+d.type+'"')}},this.workerPool.push(_)}else this.workerPool.sort(function(_,r){return _._taskLoad>r._taskLoad?-1:1});const y=this.workerPool[this.workerPool.length-1];return y._taskCosts[x]=A,y._taskLoad+=A,y})}_releaseTask(x,A){x._taskLoad-=x._taskCosts[A],delete x._callbacks[A],delete x._taskCosts[A]}debug(){console.log("Task load: ",this.workerPool.map(x=>x._taskLoad))}dispose(){for(let x=0;x<this.workerPool.length;++x)this.workerPool[x].terminate();return this.workerPool.length=0,this}}function F(){let S,x;function _(d,m,L,I,C,g){const p=g.num_components(),T=L.num_points()*p,R=T*C.BYTES_PER_ELEMENT,O=function r(d,m){switch(m){case Float32Array:return d.DT_FLOAT32;case Int8Array:return d.DT_INT8;case Int16Array:return d.DT_INT16;case Int32Array:return d.DT_INT32;case Uint8Array:return d.DT_UINT8;case Uint16Array:return d.DT_UINT16;case Uint32Array:return d.DT_UINT32}}(d,C),v=d._malloc(R);m.GetAttributeDataArrayForAllPoints(L,g,O,R,v);const B=new C(d.HEAPF32.buffer,v,T).slice();return d._free(v),{name:I,array:B,itemSize:p}}onmessage=function(d){const m=d.data;switch(m.type){case"init":S=m.decoderConfig,x=new Promise(function(C){S.onModuleLoaded=function(g){C({draco:g})},DracoDecoderModule(S)});break;case"decode":const L=m.buffer,I=m.taskConfig;x.then(C=>{const g=C.draco,p=new g.Decoder,w=new g.DecoderBuffer;w.Init(new Int8Array(L),L.byteLength);try{const T=function A(d,m,L,I){const C=I.attributeIDs,g=I.attributeTypes;let p,w;const T=m.GetEncodedGeometryType(L);if(T===d.TRIANGULAR_MESH)p=new d.Mesh,w=m.DecodeBufferToMesh(L,p);else{if(T!==d.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");p=new d.PointCloud,w=m.DecodeBufferToPointCloud(L,p)}if(!w.ok()||0===p.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+w.error_msg());const R={index:null,attributes:[]};for(const O in C){const v=self[g[O]];let B,D;if(I.useUniqueIDs)D=C[O],B=m.GetAttributeByUniqueId(p,D);else{if(D=m.GetAttributeId(p,d[C[O]]),-1===D)continue;B=m.GetAttribute(p,D)}R.attributes.push(_(d,m,p,O,v,B))}return T===d.TRIANGULAR_MESH&&(R.index=function y(d,m,L){const C=3*L.num_faces(),g=4*C,p=d._malloc(g);m.GetTrianglesUInt32Array(L,g,p);const w=new Uint32Array(d.HEAPF32.buffer,p,C).slice();return d._free(p),{array:w,itemSize:1}}(d,m,p)),d.destroy(p),R}(g,p,w,I),R=T.attributes.map(O=>O.array.buffer);T.index&&R.push(T.index.array.buffer),self.postMessage({type:"decode",id:m.id,geometry:T},R)}catch(T){console.error(T),self.postMessage({type:"error",id:m.id,error:T.message})}finally{g.destroy(w),g.destroy(p)}})}}}},5773:(be,he,ee)=>{ee.d(he,{J:()=>ie});var c=ee(6682);class ie extends c.aNw{constructor(A){super(A)}load(A,y,_,r){const d=this,m=new c.hH6(this.manager);m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(d.withCredentials),m.load(A,function(L){let I;try{I=JSON.parse(L)}catch(g){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),I=JSON.parse(L.substring(65,L.length-2))}const C=d.parse(I);y&&y(C)},_,r)}parse(A){return new le(A)}}class le{constructor(A){this.isFont=!0,this.type="Font",this.data=A}generateShapes(A,y=100){const _=[],r=function F(x,A,y){const _=Array.from(x),r=A/y.resolution,d=(y.boundingBox.yMax-y.boundingBox.yMin+y.underlineThickness)*r,m=[];let L=0,I=0;for(let C=0;C<_.length;C++){const g=_[C];if("\n"===g)L=0,I-=d;else{const p=S(g,r,L,I,y);L+=p.offsetX,m.push(p.path)}}return m}(A,y,this.data);for(let d=0,m=r.length;d<m;d++)_.push(...r[d].toShapes());return _}}function S(x,A,y,_,r){const d=r.glyphs[x]||r.glyphs["?"];if(!d)return void console.error('THREE.Font: character "'+x+'" does not exists in font family '+r.familyName+".");const m=new c.T_1;let L,I,C,g,p,w,T,R;if(d.o){const O=d._cachedOutline||(d._cachedOutline=d.o.split(" "));for(let v=0,B=O.length;v<B;)switch(O[v++]){case"m":L=O[v++]*A+y,I=O[v++]*A+_,m.moveTo(L,I);break;case"l":L=O[v++]*A+y,I=O[v++]*A+_,m.lineTo(L,I);break;case"q":C=O[v++]*A+y,g=O[v++]*A+_,p=O[v++]*A+y,w=O[v++]*A+_,m.quadraticCurveTo(p,w,C,g);break;case"b":C=O[v++]*A+y,g=O[v++]*A+_,p=O[v++]*A+y,w=O[v++]*A+_,T=O[v++]*A+y,R=O[v++]*A+_,m.bezierCurveTo(p,w,T,R,C,g)}}return{offsetX:d.ha*A,path:m}}},1509:(be,he,ee)=>{ee.d(he,{E:()=>ie});var c=ee(6682);class ie extends c.aNw{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new y(e)}),this.register(function(e){return new C(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new r(e)}),this.register(function(e){return new d(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new L(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new I(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new S(e)}),this.register(function(e){return new p(e)})}load(t,e,o,s){const i=this;let n;n=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:c.Zp0.extractUrlBase(t),this.manager.itemStart(t);const l=function(h){s?s(h):console.error(h),i.manager.itemError(t),i.manager.itemEnd(t)},a=new c.hH6(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(h){try{i.parse(h,n,function(b){e(b),i.manager.itemEnd(t)},l)}catch(b){l(b)}},o,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,o,s){let i;const n={},l={};if("string"==typeof t)i=t;else if(c.Zp0.decodeText(new Uint8Array(t,0,4))===w){try{n[F.KHR_BINARY_GLTF]=new O(t)}catch(f){return void(s&&s(f))}i=n[F.KHR_BINARY_GLTF].content}else i=c.Zp0.decodeText(new Uint8Array(t));const a=JSON.parse(i);if(void 0===a.asset||a.asset.version[0]<2)return void(s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const h=new Re(a,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let b=0;b<this.pluginCallbacks.length;b++){const f=this.pluginCallbacks[b](h);l[f.name]=f,n[f.name]=!0}if(a.extensionsUsed)for(let b=0;b<a.extensionsUsed.length;++b){const f=a.extensionsUsed[b],M=a.extensionsRequired||[];switch(f){case F.KHR_MATERIALS_UNLIT:n[f]=new x;break;case F.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:n[f]=new z;break;case F.KHR_DRACO_MESH_COMPRESSION:n[f]=new v(a,this.dracoLoader);break;case F.KHR_TEXTURE_TRANSFORM:n[f]=new B;break;case F.KHR_MESH_QUANTIZATION:n[f]=new U;break;default:M.indexOf(f)>=0&&void 0===l[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}h.setExtensions(n),h.setPlugins(l),h.parse(o,s)}parseAsync(t,e){const o=this;return new Promise(function(s,i){o.parse(t,e,s,i)})}}function le(){let E={};return{get:function(t){return E[t]},add:function(t,e){E[t]=e},remove:function(t){delete E[t]},removeAll:function(){E={}}}}const F={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class S{constructor(t){this.parser=t,this.name=F.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let o=0,s=e.length;o<s;o++){const i=e[o];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,o="light:"+t;let s=e.cache.get(o);if(s)return s;const i=e.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[t];let h;const b=new c.Ilk(16777215);void 0!==a.color&&b.fromArray(a.color);const f=void 0!==a.range?a.range:0;switch(a.type){case"directional":h=new c.Ox3(b),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new c.cek(b),h.distance=f;break;case"spot":h=new c.PMe(b),h.distance=f,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,h.angle=a.spot.outerConeAngle,h.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return h.position.set(0,0,0),h.decay=2,void 0!==a.intensity&&(h.intensity=a.intensity),h.name=e.createUniqueName(a.name||"light_"+t),s=Promise.resolve(h),e.cache.add(o,s),s}createNodeAttachment(t){const e=this,o=this.parser,i=o.json.nodes[t],l=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===l?null:this._loadLight(l).then(function(a){return o._getNodeRef(e.cache,l,a)})}}class x{constructor(){this.name=F.KHR_MATERIALS_UNLIT}getMaterialType(){return c.vBJ}extendParams(t,e,o){const s=[];t.color=new c.Ilk(1,1,1),t.opacity=1;const i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const n=i.baseColorFactor;t.color.fromArray(n),t.opacity=n[3]}void 0!==i.baseColorTexture&&s.push(o.assignTexture(t,"map",i.baseColorTexture,c.knz))}return Promise.all(s)}}class A{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name].emissiveStrength;return void 0!==i&&(e.emissiveIntensity=i),Promise.resolve()}}class y{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const o=this.parser,s=o.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],n=s.extensions[this.name];if(void 0!==n.clearcoatFactor&&(e.clearcoat=n.clearcoatFactor),void 0!==n.clearcoatTexture&&i.push(o.assignTexture(e,"clearcoatMap",n.clearcoatTexture)),void 0!==n.clearcoatRoughnessFactor&&(e.clearcoatRoughness=n.clearcoatRoughnessFactor),void 0!==n.clearcoatRoughnessTexture&&i.push(o.assignTexture(e,"clearcoatRoughnessMap",n.clearcoatRoughnessTexture)),void 0!==n.clearcoatNormalTexture&&(i.push(o.assignTexture(e,"clearcoatNormalMap",n.clearcoatNormalTexture)),void 0!==n.clearcoatNormalTexture.scale)){const l=n.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new c.FM8(l,l)}return Promise.all(i)}}class _{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const o=this.parser,s=o.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],n=s.extensions[this.name];return void 0!==n.iridescenceFactor&&(e.iridescence=n.iridescenceFactor),void 0!==n.iridescenceTexture&&i.push(o.assignTexture(e,"iridescenceMap",n.iridescenceTexture)),void 0!==n.iridescenceIor&&(e.iridescenceIOR=n.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==n.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=n.iridescenceThicknessMinimum),void 0!==n.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=n.iridescenceThicknessMaximum),void 0!==n.iridescenceThicknessTexture&&i.push(o.assignTexture(e,"iridescenceThicknessMap",n.iridescenceThicknessTexture)),Promise.all(i)}}class r{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_SHEEN}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const o=this.parser,s=o.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[];e.sheenColor=new c.Ilk(0,0,0),e.sheenRoughness=0,e.sheen=1;const n=s.extensions[this.name];return void 0!==n.sheenColorFactor&&e.sheenColor.fromArray(n.sheenColorFactor),void 0!==n.sheenRoughnessFactor&&(e.sheenRoughness=n.sheenRoughnessFactor),void 0!==n.sheenColorTexture&&i.push(o.assignTexture(e,"sheenColorMap",n.sheenColorTexture,c.knz)),void 0!==n.sheenRoughnessTexture&&i.push(o.assignTexture(e,"sheenRoughnessMap",n.sheenRoughnessTexture)),Promise.all(i)}}class d{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const o=this.parser,s=o.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],n=s.extensions[this.name];return void 0!==n.transmissionFactor&&(e.transmission=n.transmissionFactor),void 0!==n.transmissionTexture&&i.push(o.assignTexture(e,"transmissionMap",n.transmissionTexture)),Promise.all(i)}}class m{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_VOLUME}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const o=this.parser,s=o.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],n=s.extensions[this.name];e.thickness=void 0!==n.thicknessFactor?n.thicknessFactor:0,void 0!==n.thicknessTexture&&i.push(o.assignTexture(e,"thicknessMap",n.thicknessTexture)),e.attenuationDistance=n.attenuationDistance||0;const l=n.attenuationColor||[1,1,1];return e.attenuationColor=new c.Ilk(l[0],l[1],l[2]),Promise.all(i)}}class L{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_IOR}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=s.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class I{constructor(t){this.parser=t,this.name=F.KHR_MATERIALS_SPECULAR}getMaterialType(t){const o=this.parser.json.materials[t];return o.extensions&&o.extensions[this.name]?c.EJi:null}extendMaterialParams(t,e){const o=this.parser,s=o.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const i=[],n=s.extensions[this.name];e.specularIntensity=void 0!==n.specularFactor?n.specularFactor:1,void 0!==n.specularTexture&&i.push(o.assignTexture(e,"specularIntensityMap",n.specularTexture));const l=n.specularColorFactor||[1,1,1];return e.specularColor=new c.Ilk(l[0],l[1],l[2]),void 0!==n.specularColorTexture&&i.push(o.assignTexture(e,"specularColorMap",n.specularColorTexture,c.knz)),Promise.all(i)}}class C{constructor(t){this.parser=t,this.name=F.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,o=e.json,s=o.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const i=s.extensions[this.name],n=e.options.ktx2Loader;if(!n){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,i.source,n)}}class g{constructor(t){this.parser=t,this.name=F.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,o=this.parser,s=o.json,i=s.textures[t];if(!i.extensions||!i.extensions[e])return null;const n=i.extensions[e],l=s.images[n.source];let a=o.textureLoader;if(l.uri){const h=o.options.manager.getHandler(l.uri);null!==h&&(a=h)}return this.detectSupport().then(function(h){if(h)return o.loadTextureImage(t,n.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class p{constructor(t){this.name=F.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,o=e.bufferViews[t];if(o.extensions&&o.extensions[this.name]){const s=o.extensions[this.name],i=this.parser.getDependency("buffer",s.buffer),n=this.parser.options.meshoptDecoder;if(!n||!n.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,n.ready]).then(function(l){const a=s.byteOffset||0,h=s.byteLength||0,b=s.count,f=s.byteStride,M=new ArrayBuffer(b*f),k=new Uint8Array(l[0],a,h);return n.decodeGltfBuffer(new Uint8Array(M),b,f,k,s.mode,s.filter),M})}return null}}const w="glTF";class O{constructor(t){this.name=F.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:c.Zp0.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==w)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const o=this.header.length-12,s=new DataView(t,12);let i=0;for(;i<o;){const n=s.getUint32(i,!0);i+=4;const l=s.getUint32(i,!0);if(i+=4,1313821514===l){const a=new Uint8Array(t,12+i,n);this.content=c.Zp0.decodeText(a)}else if(5130562===l){const a=12+i;this.body=t.slice(a,a+n)}i+=n}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class v{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=F.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const o=this.json,s=this.dracoLoader,i=t.extensions[this.name].bufferView,n=t.extensions[this.name].attributes,l={},a={},h={};for(const b in n){const f=re[b]||b.toLowerCase();l[f]=n[b]}for(const b in t.attributes){const f=re[b]||b.toLowerCase();if(void 0!==n[b]){const M=o.accessors[t.attributes[b]];h[f]=W[M.componentType],a[f]=!0===M.normalized}}return e.getDependency("bufferView",i).then(function(b){return new Promise(function(f){s.decodeDracoFile(b,function(M){for(const k in M.attributes){const V=M.attributes[k],Y=a[k];void 0!==Y&&(V.normalized=Y)}f(M)},l,h)})})}}class B{constructor(){this.name=F.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class D extends c.Wid{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),n=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),l={specular:{value:(new c.Ilk).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=l,this.onBeforeCompile=function(a){for(const h in l)a.uniforms[h]=l[h];a.fragmentShader=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",n)},Object.defineProperties(this,{specular:{get:function(){return l.specular.value},set:function(a){l.specular.value=a}},specularMap:{get:function(){return l.specularMap.value},set:function(a){l.specularMap.value=a,a?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(a){l.glossiness.value=a}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(a){l.glossinessMap.value=a,a?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class z{constructor(){this.name=F.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return D}extendParams(t,e,o){const s=e.extensions[this.name];t.color=new c.Ilk(1,1,1),t.opacity=1;const i=[];if(Array.isArray(s.diffuseFactor)){const n=s.diffuseFactor;t.color.fromArray(n),t.opacity=n[3]}if(void 0!==s.diffuseTexture&&i.push(o.assignTexture(t,"map",s.diffuseTexture,c.knz)),t.emissive=new c.Ilk(0,0,0),t.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,t.specular=new c.Ilk(1,1,1),Array.isArray(s.specularFactor)&&t.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){const n=s.specularGlossinessTexture;i.push(o.assignTexture(t,"glossinessMap",n)),i.push(o.assignTexture(t,"specularMap",n,c.knz))}return Promise.all(i)}createMaterial(t){const e=new D(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=void 0===t.emissiveIntensity?1:t.emissiveIntensity,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=c.IOt,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e}}class U{constructor(){this.name=F.KHR_MESH_QUANTIZATION}}class K extends c._C8{constructor(t,e,o,s){super(t,e,o,s)}copySampleValue_(t){const e=this.resultBuffer,o=this.sampleValues,s=this.valueSize,i=t*s*3+s;for(let n=0;n!==s;n++)e[n]=o[i+n];return e}interpolate_(t,e,o,s){const i=this.resultBuffer,n=this.sampleValues,l=this.valueSize,a=2*l,h=3*l,b=s-e,f=(o-e)/b,M=f*f,k=M*f,V=t*h,Y=V-h,j=-2*k+3*M,H=k-M,se=1-j,u=H-M+f;for(let P=0;P!==l;P++)i[P]=se*n[Y+P+l]+u*(n[Y+P+a]*b)+j*n[V+P+l]+H*(n[V+P]*b);return i}}const N=new c._fP;class q extends K{interpolate_(t,e,o,s){const i=super.interpolate_(t,e,o,s);return N.fromArray(i).normalize().toArray(i),i}}const W={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$={9728:c.TyD,9729:c.wem,9984:c.YLQ,9985:c.qyh,9986:c.aH4,9987:c.D1R},te={33071:c.uWy,33648:c.OoA,10497:c.rpg},me={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},re={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ne={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Z={CUBICSPLINE:void 0,LINEAR:c.NMF,STEP:c.Syv};function Te(E,t,e){for(const o in e.extensions)void 0===E[o]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[o]=e.extensions[o])}function fe(E,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(E.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Oe(E,t){if(E.updateMorphTargets(),void 0!==t.weights)for(let e=0,o=t.weights.length;e<o;e++)E.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(E.morphTargetInfluences.length===e.length){E.morphTargetDictionary={};for(let o=0,s=e.length;o<s;o++)E.morphTargetDictionary[e[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Pe(E){const t=E.extensions&&E.extensions[F.KHR_DRACO_MESH_COMPRESSION];let e;return e=t?"draco:"+t.bufferView+":"+t.indices+":"+Ae(t.attributes):E.indices+":"+Ae(E.attributes)+":"+E.mode,e}function Ae(E){let t="";const e=Object.keys(E).sort();for(let o=0,s=e.length;o<s;o++)t+=e[o]+":"+E[e[o]]+";";return t}function ye(E){switch(E){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class Re{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new le,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const o=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,i=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;this.textureLoader="undefined"==typeof createImageBitmap||o||s&&i<98?new c.dpR(this.options.manager):new c.QRU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new c.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const o=this,s=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(n){return n._markDefs&&n._markDefs()}),Promise.all(this._invokeAll(function(n){return n.beforeRoot&&n.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(n){const l={scene:n[0][s.scene||0],scenes:n[0],animations:n[1],cameras:n[2],asset:s.asset,parser:o,userData:{}};Te(i,l,s),fe(l,s),Promise.all(o._invokeAll(function(a){return a.afterRoot&&a.afterRoot(l)})).then(function(){t(l)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],o=this.json.meshes||[];for(let s=0,i=e.length;s<i;s++){const n=e[s].joints;for(let l=0,a=n.length;l<a;l++)t[n[l]].isBone=!0}for(let s=0,i=t.length;s<i;s++){const n=t[s];void 0!==n.mesh&&(this._addNodeRef(this.meshCache,n.mesh),void 0!==n.skin&&(o[n.mesh].isSkinnedMesh=!0)),void 0!==n.camera&&this._addNodeRef(this.cameraCache,n.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,o){if(t.refs[e]<=1)return o;const s=o.clone(),i=(n,l)=>{const a=this.associations.get(n);null!=a&&this.associations.set(l,a);for(const[h,b]of n.children.entries())i(b,l.children[h])};return i(o,s),s.name+="_instance_"+t.uses[e]++,s}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let o=0;o<e.length;o++){const s=t(e[o]);if(s)return s}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const o=[];for(let s=0;s<e.length;s++){const i=t(e[s]);i&&o.push(i)}return o}getDependency(t,e){const o=t+":"+e;let s=this.cache.get(o);if(!s){switch(t){case"scene":s=this.loadScene(e);break;case"node":s=this.loadNode(e);break;case"mesh":s=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(e)});break;case"accessor":s=this.loadAccessor(e);break;case"bufferView":s=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(e)});break;case"buffer":s=this.loadBuffer(e);break;case"material":s=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(e)});break;case"texture":s=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(e)});break;case"skin":s=this.loadSkin(e);break;case"animation":s=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(e)});break;case"camera":s=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(o,s)}return s}getDependencies(t){let e=this.cache.get(t);if(!e){const o=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(i,n){return o.getDependency(t,n)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],o=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[F.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(i,n){o.load(c.Zp0.resolveURL(e.uri,s.path),i,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(o){const i=e.byteOffset||0;return o.slice(i,i+(e.byteLength||0))})}loadAccessor(t){const e=this,o=this.json,s=this.json.accessors[t];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);const i=[];return i.push(void 0!==s.bufferView?this.getDependency("bufferView",s.bufferView):null),void 0!==s.sparse&&(i.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(i).then(function(n){const l=n[0],a=me[s.type],h=W[s.componentType],b=h.BYTES_PER_ELEMENT,M=s.byteOffset||0,k=void 0!==s.bufferView?o.bufferViews[s.bufferView].byteStride:void 0,V=!0===s.normalized;let Y,j;if(k&&k!==b*a){const H=Math.floor(M/k),se="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+H+":"+s.count;let u=e.cache.get(se);u||(Y=new h(l,H*k,s.count*k/b),u=new c.vpT(Y,k/b),e.cache.add(se,u)),j=new c.kB5(u,a,M%k/b,V)}else Y=null===l?new h(s.count*a):new h(l,M,s.count*a),j=new c.TlE(Y,a,V);if(void 0!==s.sparse){const P=s.sparse.values.byteOffset||0,J=new(0,W[s.sparse.indices.componentType])(n[1],s.sparse.indices.byteOffset||0,s.sparse.count*me.SCALAR),X=new h(n[2],P,s.sparse.count*a);null!==l&&(j=new c.TlE(j.array.slice(),j.itemSize,j.normalized));for(let Q=0,ce=J.length;Q<ce;Q++){const de=J[Q];if(j.setX(de,X[Q*a]),a>=2&&j.setY(de,X[Q*a+1]),a>=3&&j.setZ(de,X[Q*a+2]),a>=4&&j.setW(de,X[Q*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return j})}loadTexture(t){const e=this.json,i=e.textures[t].source,n=e.images[i];let l=this.textureLoader;if(n.uri){const a=this.options.manager.getHandler(n.uri);null!==a&&(l=a)}return this.loadTextureImage(t,i,l)}loadTextureImage(t,e,o){const s=this,i=this.json,n=i.textures[t],l=i.images[e],a=(l.uri||l.bufferView)+":"+n.sampler;if(this.textureCache[a])return this.textureCache[a];const h=this.loadImageSource(e,o).then(function(b){b.flipY=!1,n.name&&(b.name=n.name);const M=(i.samplers||{})[n.sampler]||{};return b.magFilter=$[M.magFilter]||c.wem,b.minFilter=$[M.minFilter]||c.D1R,b.wrapS=te[M.wrapS]||c.rpg,b.wrapT=te[M.wrapT]||c.rpg,s.associations.set(b,{textures:t}),b}).catch(function(){return null});return this.textureCache[a]=h,h}loadImageSource(t,e){const s=this.json,i=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(f=>f.clone());const n=s.images[t],l=self.URL||self.webkitURL;let a=n.uri||"",h=!1;if(void 0!==n.bufferView)a=this.getDependency("bufferView",n.bufferView).then(function(f){h=!0;const M=new Blob([f],{type:n.mimeType});return a=l.createObjectURL(M),a});else if(void 0===n.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const b=Promise.resolve(a).then(function(f){return new Promise(function(M,k){let V=M;!0===e.isImageBitmapLoader&&(V=function(Y){const j=new c.xEZ(Y);j.needsUpdate=!0,M(j)}),e.load(c.Zp0.resolveURL(f,i.path),V,void 0,k)})}).then(function(f){return!0===h&&l.revokeObjectURL(a),f.userData.mimeType=n.mimeType||function Me(E){return E.search(/\.jpe?g($|\?)/i)>0||0===E.search(/^data\:image\/jpeg/)?"image/jpeg":E.search(/\.webp($|\?)/i)>0||0===E.search(/^data\:image\/webp/)?"image/webp":"image/png"}(n.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),f});return this.sourceCache[t]=b,b}assignTexture(t,e,o,s){const i=this;return this.getDependency("texture",o.index).then(function(n){if(void 0!==o.texCoord&&0!=o.texCoord&&!("aoMap"===e&&1==o.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+o.texCoord+" for texture "+e+" not yet supported."),i.extensions[F.KHR_TEXTURE_TRANSFORM]){const l=void 0!==o.extensions?o.extensions[F.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const a=i.associations.get(n);n=i.extensions[F.KHR_TEXTURE_TRANSFORM].extendTexture(n,l),i.associations.set(n,a)}}return void 0!==s&&(n.encoding=s),t[e]=n,n})}assignFinalMaterial(t){const e=t.geometry;let o=t.material;const s=void 0===e.attributes.tangent,i=void 0!==e.attributes.color,n=void 0===e.attributes.normal;if(t.isPoints){const l="PointsMaterial:"+o.uuid;let a=this.cache.get(l);a||(a=new c.UY4,c.F5T.prototype.copy.call(a,o),a.color.copy(o.color),a.map=o.map,a.sizeAttenuation=!1,this.cache.add(l,a)),o=a}else if(t.isLine){const l="LineBasicMaterial:"+o.uuid;let a=this.cache.get(l);a||(a=new c.nls,c.F5T.prototype.copy.call(a,o),a.color.copy(o.color),this.cache.add(l,a)),o=a}if(s||i||n){let l="ClonedMaterial:"+o.uuid+":";o.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),s&&(l+="derivative-tangents:"),i&&(l+="vertex-colors:"),n&&(l+="flat-shading:");let a=this.cache.get(l);a||(a=o.clone(),i&&(a.vertexColors=!0),n&&(a.flatShading=!0),s&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(l,a),this.associations.set(a,this.associations.get(o))),o=a}o.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=o}getMaterialType(){return c.Wid}loadMaterial(t){const e=this,s=this.extensions,i=this.json.materials[t];let n;const l={},a=i.extensions||{},h=[];if(a[F.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=s[F.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=f.getMaterialType(),h.push(f.extendParams(l,i,e))}else if(a[F.KHR_MATERIALS_UNLIT]){const f=s[F.KHR_MATERIALS_UNLIT];n=f.getMaterialType(),h.push(f.extendParams(l,i,e))}else{const f=i.pbrMetallicRoughness||{};if(l.color=new c.Ilk(1,1,1),l.opacity=1,Array.isArray(f.baseColorFactor)){const M=f.baseColorFactor;l.color.fromArray(M),l.opacity=M[3]}void 0!==f.baseColorTexture&&h.push(e.assignTexture(l,"map",f.baseColorTexture,c.knz)),l.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,l.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(h.push(e.assignTexture(l,"metalnessMap",f.metallicRoughnessTexture)),h.push(e.assignTexture(l,"roughnessMap",f.metallicRoughnessTexture))),n=this._invokeOne(function(M){return M.getMaterialType&&M.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(M){return M.extendMaterialParams&&M.extendMaterialParams(t,l)})))}!0===i.doubleSided&&(l.side=c.ehD);const b=i.alphaMode||"OPAQUE";if("BLEND"===b?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,"MASK"===b&&(l.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&n!==c.vBJ&&(h.push(e.assignTexture(l,"normalMap",i.normalTexture)),l.normalScale=new c.FM8(1,1),void 0!==i.normalTexture.scale)){const f=i.normalTexture.scale;l.normalScale.set(f,f)}return void 0!==i.occlusionTexture&&n!==c.vBJ&&(h.push(e.assignTexture(l,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(l.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&n!==c.vBJ&&(l.emissive=(new c.Ilk).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&n!==c.vBJ&&h.push(e.assignTexture(l,"emissiveMap",i.emissiveTexture,c.knz)),Promise.all(h).then(function(){let f;return f=n===D?s[F.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new n(l),i.name&&(f.name=i.name),fe(f,i),e.associations.set(f,{materials:t}),i.extensions&&Te(s,f,i),f})}createUniqueName(t){const e=c.iUV.sanitizeNodeName(t||"");let o=e;for(let s=1;this.nodeNamesUsed[o];++s)o=e+"_"+s;return this.nodeNamesUsed[o]=!0,o}loadGeometries(t){const e=this,o=this.extensions,s=this.primitiveCache;function i(l){return o[F.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,e).then(function(a){return we(a,l,e)})}const n=[];for(let l=0,a=t.length;l<a;l++){const h=t[l],b=Pe(h),f=s[b];if(f)n.push(f.promise);else{let M;M=h.extensions&&h.extensions[F.KHR_DRACO_MESH_COMPRESSION]?i(h):we(new c.u9r,h,e),s[b]={primitive:h,promise:M},n.push(M)}}return Promise.all(n)}loadMesh(t){const e=this,s=this.extensions,i=this.json.meshes[t],n=i.primitives,l=[];for(let a=0,h=n.length;a<h;a++){const b=void 0===n[a].material?(void 0===(E=this.cache).DefaultMaterial&&(E.DefaultMaterial=new c.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:c.Wl3})),E.DefaultMaterial):this.getDependency("material",n[a].material);l.push(b)}var E;return l.push(e.loadGeometries(n)),Promise.all(l).then(function(a){const h=a.slice(0,a.length-1),b=a[a.length-1],f=[];for(let k=0,V=b.length;k<V;k++){const Y=b[k],j=n[k];let H;const se=h[k];if(4===j.mode||5===j.mode||6===j.mode||void 0===j.mode)H=!0===i.isSkinnedMesh?new c.TUv(Y,se):new c.Kj0(Y,se),!0===H.isSkinnedMesh&&!H.geometry.attributes.skinWeight.normalized&&H.normalizeSkinWeights(),5===j.mode?H.geometry=_e(H.geometry,c.UlW):6===j.mode&&(H.geometry=_e(H.geometry,c.z$h));else if(1===j.mode)H=new c.ejS(Y,se);else if(3===j.mode)H=new c.x12(Y,se);else if(2===j.mode)H=new c.blk(Y,se);else{if(0!==j.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+j.mode);H=new c.woe(Y,se)}Object.keys(H.geometry.morphAttributes).length>0&&Oe(H,i),H.name=e.createUniqueName(i.name||"mesh_"+t),fe(H,i),j.extensions&&Te(s,H,j),e.assignFinalMaterial(H),f.push(H)}for(let k=0,V=f.length;k<V;k++)e.associations.set(f[k],{meshes:t,primitives:k});if(1===f.length)return f[0];const M=new c.ZAu;e.associations.set(M,{meshes:t});for(let k=0,V=f.length;k<V;k++)M.add(f[k]);return M})}loadCamera(t){let e;const o=this.json.cameras[t],s=o[o.type];if(s)return"perspective"===o.type?e=new c.cPb(c.M8C.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===o.type&&(e=new c.iKG(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),o.name&&(e.name=this.createUniqueName(o.name)),fe(e,o),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],o={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(o):this.getDependency("accessor",e.inverseBindMatrices).then(function(s){return o.inverseBindMatrices=s,o})}loadAnimation(t){const o=this.json.animations[t],s=[],i=[],n=[],l=[],a=[];for(let h=0,b=o.channels.length;h<b;h++){const f=o.channels[h],M=o.samplers[f.sampler],k=f.target,Y=void 0!==o.parameters?o.parameters[M.input]:M.input,j=void 0!==o.parameters?o.parameters[M.output]:M.output;s.push(this.getDependency("node",void 0!==k.node?k.node:k.id)),i.push(this.getDependency("accessor",Y)),n.push(this.getDependency("accessor",j)),l.push(M),a.push(k)}return Promise.all([Promise.all(s),Promise.all(i),Promise.all(n),Promise.all(l),Promise.all(a)]).then(function(h){const b=h[0],f=h[1],M=h[2],k=h[3],V=h[4],Y=[];for(let H=0,se=b.length;H<se;H++){const u=b[H],P=f[H],J=M[H],X=k[H],Q=V[H];if(void 0===u)continue;let ce;switch(u.updateMatrix(),u.matrixAutoUpdate=!0,ne[Q.path]){case ne.weights:ce=c.dUE;break;case ne.rotation:ce=c.iLg;break;default:ce=c.yC1}const de=u.name?u.name:u.uuid,Le=void 0!==X.interpolation?Z[X.interpolation]:c.NMF,ue=[];ne[Q.path]===ne.weights?u.traverse(function(pe){pe.morphTargetInfluences&&ue.push(pe.name?pe.name:pe.uuid)}):ue.push(de);let oe=J.array;if(J.normalized){const pe=ye(oe.constructor),Se=new Float32Array(oe.length);for(let ge=0,Ne=oe.length;ge<Ne;ge++)Se[ge]=oe[ge]*pe;oe=Se}for(let pe=0,Se=ue.length;pe<Se;pe++){const ge=new ce(ue[pe]+"."+ne[Q.path],P.array,oe,Le);"CUBICSPLINE"===X.interpolation&&(ge.createInterpolant=function(Ce){return new(this instanceof c.iLg?q:K)(this.times,this.values,this.getValueSize()/3,Ce)},ge.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Y.push(ge)}}return new c.m7l(o.name?o.name:"animation_"+t,void 0,Y)})}createNodeMesh(t){const o=this,s=this.json.nodes[t];return void 0===s.mesh?null:o.getDependency("mesh",s.mesh).then(function(i){const n=o._getNodeRef(o.meshCache,s.mesh,i);return void 0!==s.weights&&n.traverse(function(l){if(l.isMesh)for(let a=0,h=s.weights.length;a<h;a++)l.morphTargetInfluences[a]=s.weights[a]}),n})}loadNode(t){const o=this.extensions,s=this,i=this.json.nodes[t],n=i.name?s.createUniqueName(i.name):"";return function(){const l=[],a=s._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(t)});return a&&l.push(a),void 0!==i.camera&&l.push(s.getDependency("camera",i.camera).then(function(h){return s._getNodeRef(s.cameraCache,i.camera,h)})),s._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(t)}).forEach(function(h){l.push(h)}),Promise.all(l)}().then(function(l){let a;if(a=!0===i.isBone?new c.N$j:l.length>1?new c.ZAu:1===l.length?l[0]:new c.Tme,a!==l[0])for(let h=0,b=l.length;h<b;h++)a.add(l[h]);if(i.name&&(a.userData.name=i.name,a.name=n),fe(a,i),i.extensions&&Te(o,a,i),void 0!==i.matrix){const h=new c.yGw;h.fromArray(i.matrix),a.applyMatrix4(h)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=t,a})}loadScene(t){const e=this.json,o=this.extensions,s=this.json.scenes[t],i=this,n=new c.ZAu;s.name&&(n.name=i.createUniqueName(s.name)),fe(n,s),s.extensions&&Te(o,n,s);const l=s.nodes||[],a=[];for(let h=0,b=l.length;h<b;h++)a.push(Ee(l[h],n,e,i));return Promise.all(a).then(function(){return i.associations=(b=>{const f=new Map;for(const[M,k]of i.associations)(M instanceof c.F5T||M instanceof c.xEZ)&&f.set(M,k);return b.traverse(M=>{const k=i.associations.get(M);null!=k&&f.set(M,k)}),f})(n),n})}}function Ee(E,t,e,o){const s=e.nodes[E];return o.getDependency("node",E).then(function(i){if(void 0===s.skin)return i;let n;return o.getDependency("skin",s.skin).then(function(l){n=l;const a=[];for(let h=0,b=n.joints.length;h<b;h++)a.push(o.getDependency("node",n.joints[h]));return Promise.all(a)}).then(function(l){return i.traverse(function(a){if(!a.isMesh)return;const h=[],b=[];for(let f=0,M=l.length;f<M;f++){const k=l[f];if(k){h.push(k);const V=new c.yGw;void 0!==n.inverseBindMatrices&&V.fromArray(n.inverseBindMatrices.array,16*f),b.push(V)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[f])}a.bind(new c.OdW(h,b),a.matrixWorld)}),i})}).then(function(i){t.add(i);const n=[];if(s.children){const l=s.children;for(let a=0,h=l.length;a<h;a++)n.push(Ee(l[a],i,e,o))}return Promise.all(n)})}function we(E,t,e){const o=t.attributes,s=[];function i(n,l){return e.getDependency("accessor",n).then(function(a){E.setAttribute(l,a)})}for(const n in o){const l=re[n]||n.toLowerCase();l in E.attributes||s.push(i(o[n],l))}if(void 0!==t.indices&&!E.index){const n=e.getDependency("accessor",t.indices).then(function(l){E.setIndex(l)});s.push(n)}return fe(E,t),function ke(E,t,e){const o=t.attributes,s=new c.ZzF;if(void 0===o.POSITION)return;{const l=e.json.accessors[o.POSITION],a=l.min,h=l.max;if(void 0===a||void 0===h)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new c.Pa4(a[0],a[1],a[2]),new c.Pa4(h[0],h[1],h[2])),l.normalized){const b=ye(W[l.componentType]);s.min.multiplyScalar(b),s.max.multiplyScalar(b)}}const i=t.targets;if(void 0!==i){const l=new c.Pa4,a=new c.Pa4;for(let h=0,b=i.length;h<b;h++){const f=i[h];if(void 0!==f.POSITION){const M=e.json.accessors[f.POSITION],k=M.min,V=M.max;if(void 0!==k&&void 0!==V){if(a.setX(Math.max(Math.abs(k[0]),Math.abs(V[0]))),a.setY(Math.max(Math.abs(k[1]),Math.abs(V[1]))),a.setZ(Math.max(Math.abs(k[2]),Math.abs(V[2]))),M.normalized){const Y=ye(W[M.componentType]);a.multiplyScalar(Y)}l.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}E.boundingBox=s;const n=new c.aLr;s.getCenter(n.center),n.radius=s.min.distanceTo(s.max)/2,E.boundingSphere=n}(E,t,e),Promise.all(s).then(function(){return void 0!==t.targets?function Ie(E,t,e){let o=!1,s=!1,i=!1;for(let h=0,b=t.length;h<b;h++){const f=t[h];if(void 0!==f.POSITION&&(o=!0),void 0!==f.NORMAL&&(s=!0),void 0!==f.COLOR_0&&(i=!0),o&&s&&i)break}if(!o&&!s&&!i)return Promise.resolve(E);const n=[],l=[],a=[];for(let h=0,b=t.length;h<b;h++){const f=t[h];if(o){const M=void 0!==f.POSITION?e.getDependency("accessor",f.POSITION):E.attributes.position;n.push(M)}if(s){const M=void 0!==f.NORMAL?e.getDependency("accessor",f.NORMAL):E.attributes.normal;l.push(M)}if(i){const M=void 0!==f.COLOR_0?e.getDependency("accessor",f.COLOR_0):E.attributes.color;a.push(M)}}return Promise.all([Promise.all(n),Promise.all(l),Promise.all(a)]).then(function(h){const f=h[1],M=h[2];return o&&(E.morphAttributes.position=h[0]),s&&(E.morphAttributes.normal=f),i&&(E.morphAttributes.color=M),E.morphTargetsRelative=!0,E})}(E,t.targets,e):E})}function _e(E,t){let e=E.getIndex();if(null===e){const n=[],l=E.getAttribute("position");if(void 0===l)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),E;for(let a=0;a<l.count;a++)n.push(a);E.setIndex(n),e=E.getIndex()}const o=e.count-2,s=[];if(t===c.z$h)for(let n=1;n<=o;n++)s.push(e.getX(0)),s.push(e.getX(n)),s.push(e.getX(n+1));else for(let n=0;n<o;n++)n%2==0?(s.push(e.getX(n)),s.push(e.getX(n+1)),s.push(e.getX(n+2))):(s.push(e.getX(n+2)),s.push(e.getX(n+1)),s.push(e.getX(n)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=E.clone();return i.setIndex(s),i}},3654:(be,he,ee)=>{ee.d(he,{v:()=>ie});var c=ee(6682);class ie extends c.aNw{constructor(S){super(S)}load(S,x,A,y){const _=this,r=""===this.path?c.Zp0.extractUrlBase(S):this.path,d=new c.hH6(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(S,function(m){try{x(_.parse(m,r))}catch(L){y?y(L):console.error(L),_.manager.itemError(S)}},A,y)}setMaterialOptions(S){return this.materialOptions=S,this}parse(S,x){const A=S.split("\n");let y={};const _=/\s+/,r={};for(let m=0;m<A.length;m++){let L=A[m];if(L=L.trim(),0===L.length||"#"===L.charAt(0))continue;const I=L.indexOf(" ");let C=I>=0?L.substring(0,I):L;C=C.toLowerCase();let g=I>=0?L.substring(I+1):"";if(g=g.trim(),"newmtl"===C)y={name:g},r[g]=y;else if("ka"===C||"kd"===C||"ks"===C||"ke"===C){const p=g.split(_,3);y[C]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else y[C]=g}const d=new le(this.resourcePath||x,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(r),d}}class le{constructor(S="",x={}){this.baseUrl=S,this.options=x,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:c.Wl3,this.wrap=void 0!==this.options.wrap?this.options.wrap:c.rpg}setCrossOrigin(S){return this.crossOrigin=S,this}setManager(S){this.manager=S}setMaterials(S){this.materialsInfo=this.convert(S),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(S){if(!this.options)return S;const x={};for(const A in S){const y=S[A],_={};x[A]=_;for(const r in y){let d=!0,m=y[r];const L=r.toLowerCase();switch(L){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(m=[m[0]/255,m[1]/255,m[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===m[0]&&0===m[1]&&0===m[2]&&(d=!1)}d&&(_[L]=m)}}return x}preload(){for(const S in this.materialsInfo)this.create(S)}getIndex(S){return this.nameLookup[S]}getAsArray(){let S=0;for(const x in this.materialsInfo)this.materialsArray[S]=this.create(x),this.nameLookup[x]=S,S++;return this.materialsArray}create(S){return void 0===this.materials[S]&&this.createMaterial_(S),this.materials[S]}createMaterial_(S){const x=this,A=this.materialsInfo[S],y={name:S,side:this.side};function r(d,m){if(y[d])return;const L=x.getTextureParams(m,y),I=x.loadTexture(function _(d,m){return"string"!=typeof m||""===m?"":/^https?:\/\//i.test(m)?m:d+m}(x.baseUrl,L.url));I.repeat.copy(L.scale),I.offset.copy(L.offset),I.wrapS=x.wrap,I.wrapT=x.wrap,("map"===d||"emissiveMap"===d)&&(I.encoding=c.knz),y[d]=I}for(const d in A){const m=A[d];let L;if(""!==m)switch(d.toLowerCase()){case"kd":y.color=(new c.Ilk).fromArray(m).convertSRGBToLinear();break;case"ks":y.specular=(new c.Ilk).fromArray(m).convertSRGBToLinear();break;case"ke":y.emissive=(new c.Ilk).fromArray(m).convertSRGBToLinear();break;case"map_kd":r("map",m);break;case"map_ks":r("specularMap",m);break;case"map_ke":r("emissiveMap",m);break;case"norm":r("normalMap",m);break;case"map_bump":case"bump":r("bumpMap",m);break;case"map_d":r("alphaMap",m),y.transparent=!0;break;case"ns":y.shininess=parseFloat(m);break;case"d":L=parseFloat(m),L<1&&(y.opacity=L,y.transparent=!0);break;case"tr":L=parseFloat(m),this.options&&this.options.invertTrProperty&&(L=1-L),L>0&&(y.opacity=1-L,y.transparent=!0)}}return this.materials[S]=new c.xoR(y),this.materials[S]}getTextureParams(S,x){const A={scale:new c.FM8(1,1),offset:new c.FM8(0,0)},y=S.split(/\s+/);let _;return _=y.indexOf("-bm"),_>=0&&(x.bumpScale=parseFloat(y[_+1]),y.splice(_,2)),_=y.indexOf("-s"),_>=0&&(A.scale.set(parseFloat(y[_+1]),parseFloat(y[_+2])),y.splice(_,4)),_=y.indexOf("-o"),_>=0&&(A.offset.set(parseFloat(y[_+1]),parseFloat(y[_+2])),y.splice(_,4)),A.url=y.join(" ").trim(),A}loadTexture(S,x,A,y,_){const r=void 0!==this.manager?this.manager:c.tEQ;let d=r.getHandler(S);null===d&&(d=new c.dpR(r)),d.setCrossOrigin&&d.setCrossOrigin(this.crossOrigin);const m=d.load(S,A,y,_);return void 0!==x&&(m.mapping=x),m}}},5096:(be,he,ee)=>{ee.d(he,{L:()=>I});var c=ee(6682);const ie=/^[og]\s*(.+)?/,le=/^mtllib /,F=/^usemtl /,S=/^usemap /,x=/\s+/,A=new c.Pa4,y=new c.Pa4,_=new c.Pa4,r=new c.Pa4,d=new c.Pa4,m=new c.Ilk;function L(){const C={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(g,p){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=g,void(this.object.fromDeclaration=!1!==p);const w=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:g||"",fromDeclaration:!1!==p,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(T,R){const O=this._finalize(!1);O&&(O.inherited||O.groupCount<=0)&&this.materials.splice(O.index,1);const v={index:this.materials.length,name:T||"",mtllib:Array.isArray(R)&&R.length>0?R[R.length-1]:"",smooth:void 0!==O?O.smooth:this.smooth,groupStart:void 0!==O?O.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(B){const D={index:"number"==typeof B?B:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return D.clone=this.clone.bind(D),D}};return this.materials.push(v),v},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(T){const R=this.currentMaterial();if(R&&-1===R.groupEnd&&(R.groupEnd=this.geometry.vertices.length/3,R.groupCount=R.groupEnd-R.groupStart,R.inherited=!1),T&&this.materials.length>1)for(let O=this.materials.length-1;O>=0;O--)this.materials[O].groupCount<=0&&this.materials.splice(O,1);return T&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),R}},w&&w.name&&"function"==typeof w.clone){const T=w.clone(0);T.inherited=!0,this.object.materials.push(T)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(g,p){const w=parseInt(g,10);return 3*(w>=0?w-1:w+p/3)},parseNormalIndex:function(g,p){const w=parseInt(g,10);return 3*(w>=0?w-1:w+p/3)},parseUVIndex:function(g,p){const w=parseInt(g,10);return 2*(w>=0?w-1:w+p/2)},addVertex:function(g,p,w){const T=this.vertices,R=this.object.geometry.vertices;R.push(T[g+0],T[g+1],T[g+2]),R.push(T[p+0],T[p+1],T[p+2]),R.push(T[w+0],T[w+1],T[w+2])},addVertexPoint:function(g){const p=this.vertices;this.object.geometry.vertices.push(p[g+0],p[g+1],p[g+2])},addVertexLine:function(g){const p=this.vertices;this.object.geometry.vertices.push(p[g+0],p[g+1],p[g+2])},addNormal:function(g,p,w){const T=this.normals,R=this.object.geometry.normals;R.push(T[g+0],T[g+1],T[g+2]),R.push(T[p+0],T[p+1],T[p+2]),R.push(T[w+0],T[w+1],T[w+2])},addFaceNormal:function(g,p,w){const T=this.vertices,R=this.object.geometry.normals;A.fromArray(T,g),y.fromArray(T,p),_.fromArray(T,w),d.subVectors(_,y),r.subVectors(A,y),d.cross(r),d.normalize(),R.push(d.x,d.y,d.z),R.push(d.x,d.y,d.z),R.push(d.x,d.y,d.z)},addColor:function(g,p,w){const T=this.colors,R=this.object.geometry.colors;void 0!==T[g]&&R.push(T[g+0],T[g+1],T[g+2]),void 0!==T[p]&&R.push(T[p+0],T[p+1],T[p+2]),void 0!==T[w]&&R.push(T[w+0],T[w+1],T[w+2])},addUV:function(g,p,w){const T=this.uvs,R=this.object.geometry.uvs;R.push(T[g+0],T[g+1]),R.push(T[p+0],T[p+1]),R.push(T[w+0],T[w+1])},addDefaultUV:function(){const g=this.object.geometry.uvs;g.push(0,0),g.push(0,0),g.push(0,0)},addUVLine:function(g){const p=this.uvs;this.object.geometry.uvs.push(p[g+0],p[g+1])},addFace:function(g,p,w,T,R,O,v,B,D){const z=this.vertices.length;let U=this.parseVertexIndex(g,z),K=this.parseVertexIndex(p,z),N=this.parseVertexIndex(w,z);if(this.addVertex(U,K,N),this.addColor(U,K,N),void 0!==v&&""!==v){const q=this.normals.length;U=this.parseNormalIndex(v,q),K=this.parseNormalIndex(B,q),N=this.parseNormalIndex(D,q),this.addNormal(U,K,N)}else this.addFaceNormal(U,K,N);if(void 0!==T&&""!==T){const q=this.uvs.length;U=this.parseUVIndex(T,q),K=this.parseUVIndex(R,q),N=this.parseUVIndex(O,q),this.addUV(U,K,N),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(g){this.object.geometry.type="Points";const p=this.vertices.length;for(let w=0,T=g.length;w<T;w++){const R=this.parseVertexIndex(g[w],p);this.addVertexPoint(R),this.addColor(R)}},addLineGeometry:function(g,p){this.object.geometry.type="Line";const w=this.vertices.length,T=this.uvs.length;for(let R=0,O=g.length;R<O;R++)this.addVertexLine(this.parseVertexIndex(g[R],w));for(let R=0,O=p.length;R<O;R++)this.addUVLine(this.parseUVIndex(p[R],T))}};return C.startObject("",!1),C}class I extends c.aNw{constructor(g){super(g),this.materials=null}load(g,p,w,T){const R=this,O=new c.hH6(this.manager);O.setPath(this.path),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(g,function(v){try{p(R.parse(v))}catch(B){T?T(B):console.error(B),R.manager.itemError(g)}},w,T)}setMaterials(g){return this.materials=g,this}parse(g){const p=new L;-1!==g.indexOf("\r\n")&&(g=g.replace(/\r\n/g,"\n")),-1!==g.indexOf("\\\n")&&(g=g.replace(/\\\n/g,""));const w=g.split("\n");let T=[];for(let v=0,B=w.length;v<B;v++){const D=w[v].trimStart();if(0===D.length)continue;const z=D.charAt(0);if("#"!==z)if("v"===z){const U=D.split(x);switch(U[0]){case"v":p.vertices.push(parseFloat(U[1]),parseFloat(U[2]),parseFloat(U[3])),U.length>=7?(m.setRGB(parseFloat(U[4]),parseFloat(U[5]),parseFloat(U[6])).convertSRGBToLinear(),p.colors.push(m.r,m.g,m.b)):p.colors.push(void 0,void 0,void 0);break;case"vn":p.normals.push(parseFloat(U[1]),parseFloat(U[2]),parseFloat(U[3]));break;case"vt":p.uvs.push(parseFloat(U[1]),parseFloat(U[2]))}}else if("f"===z){const K=D.slice(1).trim().split(x),N=[];for(let G=0,W=K.length;G<W;G++){const $=K[G];if($.length>0){const te=$.split("/");N.push(te)}}const q=N[0];for(let G=1,W=N.length-1;G<W;G++){const $=N[G],te=N[G+1];p.addFace(q[0],$[0],te[0],q[1],$[1],te[1],q[2],$[2],te[2])}}else if("l"===z){const U=D.substring(1).trim().split(" ");let K=[];const N=[];if(-1===D.indexOf("/"))K=U;else for(let q=0,G=U.length;q<G;q++){const W=U[q].split("/");""!==W[0]&&K.push(W[0]),""!==W[1]&&N.push(W[1])}p.addLineGeometry(K,N)}else if("p"===z){const K=D.slice(1).trim().split(" ");p.addPointGeometry(K)}else if(null!==(T=ie.exec(D))){const U=(" "+T[0].slice(1).trim()).slice(1);p.startObject(U)}else if(F.test(D))p.object.startMaterial(D.substring(7).trim(),p.materialLibraries);else if(le.test(D))p.materialLibraries.push(D.substring(7).trim());else if(S.test(D))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===z){if(T=D.split(" "),T.length>1){const K=T[1].trim().toLowerCase();p.object.smooth="0"!==K&&"off"!==K}else p.object.smooth=!0;const U=p.object.currentMaterial();U&&(U.smooth=p.object.smooth)}else{if("\0"===D)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+D+'"')}}p.finalize();const R=new c.ZAu;if(R.materialLibraries=[].concat(p.materialLibraries),1==!(1===p.objects.length&&0===p.objects[0].geometry.vertices.length))for(let v=0,B=p.objects.length;v<B;v++){const D=p.objects[v],z=D.geometry,U=D.materials,K="Line"===z.type,N="Points"===z.type;let q=!1;if(0===z.vertices.length)continue;const G=new c.u9r;G.setAttribute("position",new c.a$l(z.vertices,3)),z.normals.length>0&&G.setAttribute("normal",new c.a$l(z.normals,3)),z.colors.length>0&&(q=!0,G.setAttribute("color",new c.a$l(z.colors,3))),!0===z.hasUVIndices&&G.setAttribute("uv",new c.a$l(z.uvs,2));const W=[];for(let te=0,me=U.length;te<me;te++){const re=U[te],ne=re.name+"_"+re.smooth+"_"+q;let Z=p.materials[ne];if(null!==this.materials)if(Z=this.materials.create(re.name),!K||!Z||Z instanceof c.nls){if(N&&Z&&!(Z instanceof c.UY4)){const ae=new c.UY4({size:10,sizeAttenuation:!1});c.F5T.prototype.copy.call(ae,Z),ae.color.copy(Z.color),ae.map=Z.map,Z=ae}}else{const ae=new c.nls;c.F5T.prototype.copy.call(ae,Z),ae.color.copy(Z.color),Z=ae}void 0===Z&&(Z=K?new c.nls:N?new c.UY4({size:1,sizeAttenuation:!1}):new c.xoR,Z.name=re.name,Z.flatShading=!re.smooth,Z.vertexColors=q,p.materials[ne]=Z),W.push(Z)}let $;if(W.length>1){for(let te=0,me=U.length;te<me;te++){const re=U[te];G.addGroup(re.groupStart,re.groupCount,te)}$=K?new c.ejS(G,W):N?new c.woe(G,W):new c.Kj0(G,W)}else $=K?new c.ejS(G,W[0]):N?new c.woe(G,W[0]):new c.Kj0(G,W[0]);$.name=D.name,R.add($)}else if(p.vertices.length>0){const v=new c.UY4({size:1,sizeAttenuation:!1}),B=new c.u9r;B.setAttribute("position",new c.a$l(p.vertices,3)),p.colors.length>0&&void 0!==p.colors[0]&&(B.setAttribute("color",new c.a$l(p.colors,3)),v.vertexColors=!0);const D=new c.woe(B,v);R.add(D)}return R}}}}]);