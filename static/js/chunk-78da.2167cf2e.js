(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-78da"],{"3sRf":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMjAwIDIwMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAwIDIwMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuc3Qwe2ZpbGw6I0ZGRkZGRjt9DQo8L3N0eWxlPg0KPHBhdGggY2xhc3M9InN0MCIgZD0iTTI5LjksMzEuOWgxMzkuNmM5LjUsMCwxNy4zLDcuNSwxNy40LDE2LjhMOTkuOCw5NkwxMi42LDQ4LjdDMTIuNiwzOS40LDIwLjQsMzEuOSwyOS45LDMxLjlMMjkuOSwzMS45eg0KCSBNMTIuNiw2Ni44bC0wLjEsODMuOGMwLDkuMyw3LjksMTcsMTcuNCwxN2gxMzkuNmM5LjYsMCwxNy40LTcuNiwxNy40LTE3bDAtODMuOGwtODUuMiw0NS4yYy0xLjMsMC43LTIuOSwwLjctNC4yLDBMMTIuNiw2Ni44DQoJTDEyLjYsNjYuOHoiLz4NCjwvc3ZnPg0K"},TSme:function(t,e,i){},Uy3d:function(t,e,i){},bXgv:function(t,e,i){"use strict";var n=i("TSme");i.n(n).a},gyE3:function(t,e,i){"use strict";var n=i("Uy3d");i.n(n).a},wkBh:function(t,e,i){"use strict";i.r(e);var n=i("4d7F"),a=i.n(n),o=i("14Xm"),s=i.n(o),r=i("D3Ub"),c=i.n(r),l=i("QbLZ"),d=i.n(l),u=i("L2JU"),g=i("3SlJ"),m=i("KTTK"),f={name:"Login",data:function(){return{pageStatus:0,loading:!1,animate:null,sending:!1,buttonLocked:!1,timerToken:null,countdown:0,twitterId:"",emailAddress:"",verificationCode:""}},computed:d()({},Object(u.b)(["language","screenCategory","immersive","color","opacity"])),watch:{language:function(){}},created:function(){var t=this;this.animate=new g.a(this),this.initData().catch(function(e){t.pageStatus=2,console.error(e)})},mounted:function(){this.$store.dispatch("ToggleAnimateBackgroundStatus",!0),window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){this.stopCountdown(),this.$store.dispatch("ToggleAnimateBackgroundStatus",!1),window.removeEventListener("scroll",this.handleScroll)},methods:{initData:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.pageStatus=1,t.$store.dispatch("ToggleAnimateBackgroundStatus",!1),t.$nextTick(function(){t.$store.dispatch("ToggleAnimateBackgroundStatus",!0),t.fillAnimateRefs()});case 3:case"end":return e.stop()}},e,t)}))()},onRetry:function(){var t=this;this.pageStatus=0,this.initData().catch(function(e){t.pageStatus=2,console.error(e)})},fillAnimateRefs:function(){this.animate.setAnimateData([{ref:"content",classList:["animated","fadeInUp"]},{ref:"decoration-01",classList:["animated","bounceInLeft","delay-1s"]},{ref:"decoration-02",classList:["animated","bounceInDown","delay-1s"]},{ref:"decoration-03",classList:["animated","bounceInRight","delay-1s"]},{ref:"email-icon",classList:["animated","fadeInUp","delay-1s"]},{ref:"title",classList:["animated","fadeInUp","delay-1s"]},{ref:"subtitle",classList:["animated","fadeInUp","delay-1s"]},{ref:"twitter-id",classList:["animated","fadeInUp","delay-1s"]},{ref:"email-address",classList:["animated","fadeInUp","delay-1s"]},{ref:"verification-code",classList:["animated","fadeInUp","delay-1s"]},{ref:"login-button",classList:["animated","fadeInUp","delay-1s"]},{ref:"login-with-twitter",classList:["animated","fadeInUp","delay-1s"]}])},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.animate.onScroll(t)},onClickTwitterLogin:function(){this.$store.dispatch("ToggleAnimateBackgroundStatus",!1),this.$router.replace("/login")},onClickLogin:function(){var t=this;this.twitterId?this.emailAddress?this.verificationCode?(this.loading=!0,c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loginWithTwitter();case 2:return e.next=4,t.fetchUserInfo();case 4:case"end":return e.stop()}},e,t)}))().catch(function(e){t.loading=!1,console.error(e),t.$notify({type:"error",title:t.$t("common.dialog_title"),message:t.$t("email_login.login_failed",[e.message]),position:"top-right"})})):this.$notify({type:"warning",position:"top-right",title:this.$t("common.dialog_title"),message:this.$t("email_login.verification_require")}):this.$notify({type:"warning",position:"top-right",title:this.$t("common.dialog_title"),message:this.$t("email_login.email_address_require")}):this.$notify({type:"warning",position:"top-right",title:this.$t("common.dialog_title"),message:this.$t("email_login.twitter_id_require")})},onClickSendCode:function(){this.emailAddress?this.sendValidateCode(this.emailAddress,1):this.$notify({type:"warning",position:"top-right",title:this.$t("common.dialog_title"),message:this.$t("email_login.email_address_require")})},sendValidateCode:function(t){var e=this;this.countdown>0||this.buttonLocked||(this.buttonLocked=!0,this.sending=!0,Object(m.jb)(t,3).then(function(t){e.buttonLocked=!1,e.sending=!1,1===t.Status?(e.countdown=60,e.startCountdown(),e.$notify({type:"success",position:"top-right",title:e.$t("common.dialog_title"),message:e.$t("tips.validate_code_send_success")})):e.$notify({type:"error",position:"top-right",title:e.$t("common.dialog_title"),message:e.$t("tips.validate_code_send_failed",[t.ErrMsg])})}).catch(function(t){e.buttonLocked=!1,e.sending=!1,console.error(t)}))},startCountdown:function(){var t=this;this.stopCountdown(),this.timerToken=setTimeout(function(){t.countdown-=1,t.countdown<=0?(t.countdown=0,t.timerToken=null):t.startCountdown()},1e3)},stopCountdown:function(){this.timerToken&&(clearTimeout(this.timerToken),this.timerToken=null)},fetchUserInfo:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.getUserInfo();case 3:t.loading=!1,t.$notify({type:"success",title:t.$t("common.dialog_title"),message:t.$t("email_login.login_success"),position:"top-right"}),t.$store.dispatch("ToggleAnimateBackgroundStatus",!1),localStorage.setItem("login-flag","email"),t.$router.replace("/personal-center/assets");case 8:case"end":return e.stop()}},e,t)}))()},loginWithTwitter:function(){var t=this;return c()(s.a.mark(function e(){var i,n,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.h)(t.twitterId,t.emailAddress,t.verificationCode);case 2:if(1!==(i=e.sent).Status){e.next=10;break}t.loading=!1,n=i.Result,o=n.userId,sessionStorage.setItem("mtoken",o),e.next=11;break;case 10:return e.abrupt("return",a.a.reject({code:i.ErrCode,message:i.ErrMsg}));case 11:case"end":return e.stop()}},e,t)}))()},getUserInfo:function(){var t=this;return c()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("GetUserInfo");case 2:case"end":return e.stop()}},e,t)}))()}}},p=(i("gyE3"),i("bXgv"),i("KHd+")),h=Object(p.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-root email-login",class:t.screenCategory+" "+t.language},[n("status-container",{attrs:{status:t.pageStatus},on:{retry:function(e){t.onRetry()}}},["pc"==t.screenCategory?[n("div",{staticClass:"container"},[n("div",{ref:"content",staticClass:"content-wrapper"},[n("div",{staticClass:"decoration"},[n("img",{ref:"decoration-01",attrs:{src:i("nCZX"),alt:""}}),t._v(" "),n("img",{ref:"decoration-02",attrs:{src:i("gvC6"),alt:""}}),t._v(" "),n("img",{ref:"decoration-03",attrs:{src:i("0q09"),alt:""}})]),t._v(" "),n("div",{staticClass:"content-inner"},[n("div",{ref:"email-icon",staticClass:"icon-wrapper"},[n("img",{attrs:{src:i("3sRf"),alt:""}})]),t._v(" "),n("h3",{ref:"title"},[t._v(t._s(t.$t("email_login.title")))]),t._v(" "),n("h5",{ref:"subtitle",domProps:{innerHTML:t._s(t.$t("email_login.subtitle"))}}),t._v(" "),n("div",{ref:"twitter-id",staticClass:"form-item"},[n("el-input",{attrs:{placeholder:t.$t("email_login.twitter_id_placeholder"),clearable:""},model:{value:t.twitterId,callback:function(e){t.twitterId=e},expression:"twitterId"}})],1),t._v(" "),n("div",{ref:"email-address",staticClass:"form-item"},[n("el-input",{attrs:{placeholder:t.$t("email_login.email_address_placeholder"),clearable:""},model:{value:t.emailAddress,callback:function(e){t.emailAddress=e},expression:"emailAddress"}})],1),t._v(" "),n("div",{ref:"verification-code",staticClass:"form-item"},[n("el-input",{attrs:{placeholder:t.$t("email_login.verification_code_placeholder"),clearable:""},model:{value:t.verificationCode,callback:function(e){t.verificationCode=e},expression:"verificationCode"}},[n("span",{staticClass:"button-effect round",class:t.sending?"loading":"focus tertiary",attrs:{slot:"append"},on:{click:function(e){t.onClickSendCode()}},slot:"append"},[t._v(t._s(t.countdown>0?t.countdown+"s":t.$t("email_login.send_verification_code")))])])],1),t._v(" "),n("div",{ref:"login-button",staticClass:"login-button button-effect round",class:t.loading?"loading":"",on:{click:function(e){t.onClickLogin()}}},[t._v(t._s(t.$t("email_login.login")))]),t._v(" "),n("div",{ref:"login-with-twitter",staticClass:"login-with-twitter",on:{click:function(e){t.onClickTwitterLogin()}}},[t._v(t._s(t.$t("email_login.twitter_login")))])])])])]:(t.screenCategory,[n("div",{staticClass:"container"},[n("div",{ref:"content",staticClass:"content-wrapper"},[n("div",{staticClass:"decoration"},[n("img",{ref:"decoration-01",attrs:{src:i("nCZX"),alt:""}}),t._v(" "),n("img",{ref:"decoration-02",attrs:{src:i("gvC6"),alt:""}}),t._v(" "),n("img",{ref:"decoration-03",attrs:{src:i("0q09"),alt:""}})]),t._v(" "),n("div",{staticClass:"content-inner"},[n("div",{ref:"email-icon",staticClass:"icon-wrapper"},[n("img",{attrs:{src:i("3sRf"),alt:""}})]),t._v(" "),n("h3",{ref:"title"},[t._v(t._s(t.$t("email_login.title")))]),t._v(" "),n("h5",{ref:"subtitle",domProps:{innerHTML:t._s(t.$t("email_login.subtitle"))}}),t._v(" "),n("div",{ref:"twitter-id",staticClass:"form-item"},[n("el-input",{attrs:{placeholder:t.$t("email_login.twitter_id_placeholder"),clearable:""},model:{value:t.twitterId,callback:function(e){t.twitterId=e},expression:"twitterId"}})],1),t._v(" "),n("div",{ref:"email-address",staticClass:"form-item"},[n("el-input",{attrs:{placeholder:t.$t("email_login.email_address_placeholder"),clearable:""},model:{value:t.emailAddress,callback:function(e){t.emailAddress=e},expression:"emailAddress"}})],1),t._v(" "),n("div",{ref:"verification-code",staticClass:"form-item"},[n("el-input",{attrs:{placeholder:t.$t("email_login.verification_code_placeholder"),clearable:""},model:{value:t.verificationCode,callback:function(e){t.verificationCode=e},expression:"verificationCode"}},[n("span",{staticClass:"button-effect round",class:t.sending?"loading":"focus tertiary",attrs:{slot:"append"},on:{click:function(e){t.onClickSendCode()}},slot:"append"},[t._v(t._s(t.countdown>0?t.countdown+"s":t.$t("email_login.send_verification_code")))])])],1),t._v(" "),n("div",{ref:"login-button",staticClass:"login-button button-effect round",class:t.loading?"loading":"",on:{click:function(e){t.onClickLogin()}}},[t._v(t._s(t.$t("email_login.login")))]),t._v(" "),n("div",{ref:"login-with-twitter",staticClass:"login-with-twitter",on:{click:function(e){t.onClickTwitterLogin()}}},[t._v(t._s(t.$t("email_login.twitter_login")))])])])])])],2)],1)},[],!1,null,"61b5d69c",null);h.options.__file="index.vue";e.default=h.exports}}]);