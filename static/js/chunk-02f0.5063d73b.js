(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-02f0"],{"1TOa":function(t,e,n){},"6cao":function(t,e,n){n("h6RI"),t.exports=Math.pow(2,-52)},"6vX3":function(t,e,n){"use strict";var r=n("OM/r");n.n(r).a},"7+PR":function(t,e,n){"use strict";n.r(e);var r=n("gDS+"),a=n.n(r),o=n("14Xm"),s=n.n(o),i=n("4d7F"),c=n.n(i),l=n("D3Ub"),u=n.n(l),h=n("QbLZ"),d=n.n(h),f=n("L2JU"),p=n("3SlJ"),y=n("yWgo"),m=n("7Qib"),v=n("KTTK"),w={name:"Search",data:function(){return{pageStatus:0,animate:null,keyword:"",hotKeywords:[],historyItems:[]}},computed:d()({},Object(f.b)(["token","language","screenCategory","immersive","color","opacity"])),watch:{language:function(){window.location.reload()},screenCategory:function(){window.location.reload()}},created:function(){var t=this;this.animate=new p.a(this),this.initData().catch(function(e){t.pageStatus=2,console.error(e)})},mounted:function(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{ellipsis:y.a,formatNumber:m.a,formatTimestamp:m.b,initData:function(){var t=this;return u()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.all([t.fetchHotKeywords()]);case 2:t.historyItems=t.readSearchHistory(),t.pageStatus=1,t.$nextTick(function(){t.fillAnimateRefs()});case 5:case"end":return e.stop()}},e,t)}))()},onRetry:function(){var t=this;this.pageStatus=0,this.initData().catch(function(e){t.pageStatus=2,console.error(e)})},fillAnimateRefs:function(){this.animate.setAnimateData([{ref:"some-ref",classList:["animated","fadeIn"]}])},readSearchHistory:function(){var t=localStorage.getItem("search-history");return t?JSON.parse(t):[]},saveSearchHistory:function(t){var e=this.readSearchHistory();if(e&&e.length>0){var n=e.indexOf(t);n>=0&&e.splice(n,1)}e.unshift(t),e.length>20&&e.pop(),localStorage.setItem("search-history",a()(e))},onClickSearch:function(){this.keyword&&this.doSearch()},fetchHotKeywords:function(){var t=this;return u()(s.a.mark(function e(){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.s)();case 2:if(1!==(n=e.sent).Status){e.next=9;break}t.hotKeywords=[],(r=n.Result.recommend)&&r.length>0&&r.forEach(function(e){t.hotKeywords.push({count:e.cnt,text:e.title})}),e.next=10;break;case 9:return e.abrupt("return",c.a.reject({code:n.ErrCode,message:n.ErrMsg}));case 10:case"end":return e.stop()}},e,t)}))()},onClickHistoryItem:function(t){this.keyword=t,this.doSearch()},onClickHotKeywordItem:function(t){this.keyword=t,this.doSearch()},doSearch:function(){this.saveSearchHistory(this.keyword),this.$router.replace({name:"SearchResult",params:{keyword:this.keyword}})},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.animate.onScroll(t)}}},g=(n("Dkeg"),n("6vX3"),n("KHd+")),k=Object(g.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-root search",class:t.screenCategory+" "+t.language},[n("status-container",{attrs:{status:t.pageStatus},on:{retry:function(e){t.onRetry()}}},["pc"==t.screenCategory?[n("div",{staticClass:"main-content"},[n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.$t("search.title"))+"\n          ")]),t._v(" "),n("div",{staticClass:"search-bar"},[n("el-input",{attrs:{placeholder:t.$t("search.placeholder"),clearable:!0,size:"normal"},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onClickSearch()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",type:"primary",size:"default"},on:{click:function(e){t.onClickSearch()}},slot:"append"},[n("svg-icon",{attrs:{"icon-class":"icon_search"}})],1)],1)],1),t._v(" "),t.historyItems&&t.historyItems.length>0?n("div",{staticClass:"history"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("search.history")))]),t._v(" "),n("div",{staticClass:"list-wrapper"},[n("ul",t._l(t.historyItems,function(e,r){return n("li",{key:r,on:{click:function(n){t.onClickHistoryItem(e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])}))])]):t._e(),t._v(" "),n("div",{staticClass:"hot-keywords"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("search.hot_keywords")))]),t._v(" "),n("div",{staticClass:"list-wrapper"},[n("ul",t._l(t.hotKeywords,function(e,r){return n("li",{key:r,on:{click:function(n){t.onClickHotKeywordItem(e.text)}}},[t._v("\n                  "+t._s(e.text)+"\n                ")])}))])])])])]:void t.screenCategory],2)],1)},[],!1,null,"226aaf50",null);k.options.__file="index.vue";e.default=k.exports},"7Qib":function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return u});var r=n("14Xm"),a=n.n(r),o=n("4d7F"),s=n.n(o),i=n("D3Ub"),c=n.n(i);n("mjEM"),n("mSNy");function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";return Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},new Date(t).format(e)}function u(t){return t?t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):0}!function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new s.a(function(t,n){try{var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){var n=e.target.result;t(n)}}catch(t){n(t)}}));case 1:case"end":return t.stop()}},t,this)}))}()},Dkeg:function(t,e,n){"use strict";var r=n("1TOa");n.n(r).a},"OM/r":function(t,e,n){},h6RI:function(t,e,n){var r=n("Y7ZC");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},mjEM:function(t,e,n){t.exports={default:n("6cao"),__esModule:!0}}}]);