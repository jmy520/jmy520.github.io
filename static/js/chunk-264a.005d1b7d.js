(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-264a"],{"6cao":function(t,e,n){n("h6RI"),t.exports=Math.pow(2,-52)},"6vX3":function(t,e,n){"use strict";var r=n("OM/r");n.n(r).a},"7+PR":function(t,e,n){"use strict";n.r(e);var r=n("gDS+"),a=n.n(r),s=n("14Xm"),i=n.n(s),o=n("4d7F"),c=n.n(o),l=n("D3Ub"),u=n.n(l),d=n("QbLZ"),h=n.n(d),p=n("L2JU"),f=n("3SlJ"),m=n("yWgo"),v=n("7Qib"),y=n("KTTK"),w={name:"Search",data:function(){return{pageStatus:0,animate:null,keyword:"",hotKeywords:[],historyItems:[]}},computed:h()({},Object(p.b)(["token","language","screenCategory","immersive","color","opacity"])),watch:{language:function(){window.location.reload()},screenCategory:function(){window.location.reload()}},created:function(){var t=this;this.animate=new f.a(this),this.initData().catch(function(e){t.pageStatus=2,console.error(e)})},mounted:function(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{ellipsis:m.a,formatNumber:v.b,formatTimestamp:v.c,initData:function(){var t=this;return u()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.all([t.fetchHotKeywords()]);case 2:t.historyItems=t.readSearchHistory(),t.pageStatus=1,t.$nextTick(function(){t.fillAnimateRefs()});case 5:case"end":return e.stop()}},e,t)}))()},onRetry:function(){var t=this;this.pageStatus=0,this.initData().catch(function(e){t.pageStatus=2,console.error(e)})},fillAnimateRefs:function(){this.animate.setAnimateData([{ref:"some-ref",classList:["animated","fadeIn"]}])},readSearchHistory:function(){var t=localStorage.getItem("search-history");return t?JSON.parse(t):[]},saveSearchHistory:function(t){var e=this.readSearchHistory();if(e&&e.length>0){var n=e.indexOf(t);n>=0&&e.splice(n,1)}e.unshift(t),e.length>20&&e.pop(),localStorage.setItem("search-history",a()(e))},onClickSearch:function(){this.keyword&&this.doSearch()},fetchHotKeywords:function(){var t=this;return u()(i.a.mark(function e(){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.M)();case 2:if(1!==(n=e.sent).Status){e.next=9;break}t.hotKeywords=[],(r=n.Result.recommend)&&r.length>0&&r.forEach(function(e){t.hotKeywords.push({count:e.cnt,text:e.title})}),e.next=10;break;case 9:return e.abrupt("return",c.a.reject({code:n.ErrCode,message:n.ErrMsg}));case 10:case"end":return e.stop()}},e,t)}))()},onClickHistoryItem:function(t){this.keyword=t,this.doSearch()},onClickHotKeywordItem:function(t){this.keyword=t,this.doSearch()},doSearch:function(){this.saveSearchHistory(this.keyword),this.$router.replace("/search-result/"+this.keyword)},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.animate.onScroll(t)}}},g=(n("rdHd"),n("6vX3"),n("KHd+")),_=Object(g.a)(w,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-root search",class:t.screenCategory+" "+t.language},[n("status-container",{attrs:{status:t.pageStatus},on:{retry:function(e){t.onRetry()}}},["pc"==t.screenCategory?[n("div",{staticClass:"main-content"},[n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.$t("search.title"))+"\n          ")]),t._v(" "),n("div",{staticClass:"search-bar"},[n("el-input",{attrs:{placeholder:t.$t("search.placeholder"),clearable:!0,size:"normal"},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onClickSearch()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",type:"primary",size:"default"},on:{click:function(e){t.onClickSearch()}},slot:"append"},[n("svg-icon",{attrs:{"icon-class":"icon_search"}})],1)],1)],1),t._v(" "),t.historyItems&&t.historyItems.length>0?n("div",{staticClass:"history"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("search.history")))]),t._v(" "),n("div",{staticClass:"list-wrapper"},[n("ul",t._l(t.historyItems,function(e,r){return n("li",{key:r,on:{click:function(n){t.onClickHistoryItem(e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])}))])]):t._e(),t._v(" "),n("div",{staticClass:"hot-keywords"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("search.hot_keywords")))]),t._v(" "),n("div",{staticClass:"list-wrapper"},[n("ul",t._l(t.hotKeywords,function(e,r){return n("li",{key:r,on:{click:function(n){t.onClickHotKeywordItem(e.text)}}},[t._v("\n                  "+t._s(e.text)+"\n                ")])}))])])])])]:"pad"==t.screenCategory?void 0:[n("div",{staticClass:"main-content"},[n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.$t("search.title"))+"\n          ")]),t._v(" "),n("div",{staticClass:"search-bar"},[n("el-input",{attrs:{placeholder:t.$t("search.placeholder"),clearable:!0,size:"normal"},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.onClickSearch()}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",type:"primary",size:"default"},on:{click:function(e){t.onClickSearch()}},slot:"append"},[n("svg-icon",{attrs:{"icon-class":"icon_search"}})],1)],1)],1),t._v(" "),t.historyItems&&t.historyItems.length>0?n("div",{staticClass:"history"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("search.history")))]),t._v(" "),n("div",{staticClass:"list-wrapper"},[n("ul",t._l(t.historyItems,function(e,r){return n("li",{key:r,on:{click:function(n){t.onClickHistoryItem(e)}}},[t._v("\n                  "+t._s(e)+"\n                ")])}))])]):t._e(),t._v(" "),n("div",{staticClass:"hot-keywords"},[n("div",{staticClass:"title"},[t._v(t._s(t.$t("search.hot_keywords")))]),t._v(" "),n("div",{staticClass:"list-wrapper"},[n("ul",t._l(t.hotKeywords,function(e,r){return n("li",{key:r,on:{click:function(n){t.onClickHotKeywordItem(e.text)}}},[t._v("\n                  "+t._s(e.text)+"\n                ")])}))])])])])]],2)],1)},[],!1,null,"26e078db",null);_.options.__file="index.vue";e.default=_.exports},"7Qib":function(t,e,n){"use strict";n.d(e,"c",function(){return u}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return h});var r=n("14Xm"),a=n.n(r),s=n("4d7F"),i=n.n(s),o=n("D3Ub"),c=n.n(o),l=(n("mjEM"),n("mSNy"));function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";return Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},new Date(t).format(e)}function d(t){return t?t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):0}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"simple",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"yyyy-MM-dd hh:mm:ss",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2592e6;if((t=Math.max(t,0))>a)return u((new Date).getTime()-t,n);if(r){if("day"===r){var s=parseInt(t/864e5),i=parseInt(t%864e5/36e5),o=parseInt(t%36e5/6e4);return"simple"===e?l.a.t("time.day",[s]):l.a.t("time.day_hour_minute",[s,i,o])}if("hour"===r){var c=parseInt(t/36e5),d=parseInt(t%36e5/6e4),h=parseInt(t%6e4/1e3);return"simple"===e?l.a.t("time.hour",[c]):l.a.t("time.hour_minute_second",[c,d,h])}if("minute"===r){var p=parseInt(t/6e4),f=parseInt(t%6e4/1e3);return"simple"===e?l.a.t("time.minute",[p]):l.a.t("time.minute_second",[p,f])}var m=parseInt(t/1e3);return l.a.t("time.second",[m])}var v=!1,y=!1,w=!1,g=parseInt(t/864e5);g>0&&(v=!0);var _=parseInt(t%864e5/36e5);_>0&&(y=!0);var k=parseInt(t%36e5/6e4);k>0&&(w=!0);var C=parseInt(t%6e4/1e3);return v?"simple"===e?l.a.t("time.day",[g]):l.a.t("time.day_hour_minute",[g,_,k]):y?"simple"===e?l.a.t("time.hour",[_]):l.a.t("time.hour_minute_second",[_,k,C]):w?"simple"===e?l.a.t("time.minute",[k]):l.a.t("time.minute_second",[k,C]):l.a.t("time.second",[C])}!function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t,n){try{var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){var n=e.target.result;t(n)}}catch(t){n(t)}}));case 1:case"end":return t.stop()}},t,this)}))}()},"OM/r":function(t,e,n){},TYcg:function(t,e,n){},h6RI:function(t,e,n){var r=n("Y7ZC");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},mjEM:function(t,e,n){t.exports={default:n("6cao"),__esModule:!0}},rdHd:function(t,e,n){"use strict";var r=n("TYcg");n.n(r).a}}]);